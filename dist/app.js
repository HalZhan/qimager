webpackJsonp([0],[function(t,e,n){"use strict";var o=n(1),r=n(3),i=n(23);r.enableProdMode(),o.platformBrowserDynamic().bootstrapModule(i.AppModule)},,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t,e,n,o){var i,a=arguments.length,s=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(a<3?i(s):a>3?i(e,n,s):i(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s},a=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=n(3),c=n(21),u=n(24),l=n(28),h=n(44),p=n(46),f=n(52),d=n(54),g=n(57),y=n(50),m=function t(){o(this,t)};m=i([s.NgModule({imports:[c.BrowserModule,u.FormsModule],providers:[y.SharedService],declarations:[h.AppComponent,p.HeaderAreaComponent,f.EffectAreaComponent,d.ActItemComponent,g.StageAreaComponent,l.ImageCropperComponent],bootstrap:[h.AppComponent]}),a("design:paramtypes",[])],m),e.AppModule=m},function(t,e,n){!function(t,o){o(e,n(3),n(25),n(4),n(5),n(26))}(this,function(t,e,n,o,r,i){"use strict";function a(t){return null!=t}function s(t){return null==t}function c(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function u(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function l(t){return!u(t)}function h(t){return null==t||"string"==typeof t&&0===t.length}function p(t){return W(t)?t:n.toPromise.call(t)}function f(t,e){return e.map(function(e){return e(t)})}function d(t,e){return e.map(function(e){return e(t)})}function g(t){var e=t.reduce(function(t,e){return a(e)?L.merge(t,e):t},{});return 0===Object.keys(e).length?null:e}function y(t){return t.validate?function(e){return t.validate(e)}:t}function m(t){return t.validate?function(e){return t.validate(e)}:t}function v(){throw new Error("unimplemented")}function b(t,e){return null==t?""+e:(l(e)||(e="Object"),(t+": "+e).slice(0,50))}function _(t){return t.split(":")[0]}function C(t,e){return null==t?""+e:("string"==typeof e&&(e="'"+e+"'"),l(e)||(e="Object"),(t+": "+e).slice(0,50))}function S(t){return t.split(":")[0]}function P(t,e){return e.path.concat([t])}function w(t,e){t||I(e,"Cannot find control with"),e.valueAccessor||I(e,"No value accessor for form control with"),t.validator=X.compose([t.validator,e.validator]),t.asyncValidator=X.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),e.valueAccessor.registerOnChange(function(n){e.viewToModelUpdate(n),t.markAsDirty(),t.setValue(n,{emitModelToViewChange:!1})}),e.valueAccessor.registerOnTouched(function(){return t.markAsTouched()}),t.registerOnChange(function(t,n){e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)}),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(function(t){e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})}),e._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})})}function E(t,e){e.valueAccessor.registerOnChange(function(){return D(e)}),e.valueAccessor.registerOnTouched(function(){return D(e)}),e._rawValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}function O(t,e){s(t)&&I(e,"Cannot find control with"),t.validator=X.compose([t.validator,e.validator]),t.asyncValidator=X.composeAsync([t.asyncValidator,e.asyncValidator])}function D(t){return I(t,"There is no FormControl instance attached to form control element with")}function I(t,e){var n;throw n=t.path.length>1?"path: '"+t.path.join(" -> ")+"'":t.path[0]?"name: '"+t.path+"'":"unspecified name attribute",new Error(e+" "+n)}function x(t){return a(t)?X.compose(t.map(y)):null}function T(t){return a(t)?X.composeAsync(t.map(m)):null}function k(t,e){if(!t.hasOwnProperty("model"))return!1;var n=t.model;return!!n.isFirstChange()||!c(e,n.currentValue)}function A(t){return dt.some(function(e){return t.constructor===e})}function R(t,e){if(!e)return null;var n,o,r;return e.forEach(function(e){e.constructor===Q?n=e:A(e)?(o&&I(t,"More than one built-in value accessor matches form control with"),o=e):(r&&I(t,"More than one custom value accessor matches form control with"),r=e)}),r?r:o?o:n?n:(I(t,"No valid value accessor for form control with"),null)}function V(t,e,n){return null==e?null:(e instanceof Array||(e=e.split(n)),e instanceof Array&&0===e.length?null:e.reduce(function(t,e){return t instanceof kt?t.controls[e]||null:t instanceof At?t.at(e)||null:null},t))}function M(t){return W(t)?i.fromPromise(t):t}function j(t){return Array.isArray(t)?x(t):t}function F(t){return Array.isArray(t)?T(t):t}function N(t){return!(t instanceof ee||t instanceof Qt||t instanceof oe)}var U=function(){function t(){}return Object.defineProperty(t.prototype,"control",{get:function(){throw new Error("unimplemented")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.reset=function(t){void 0===t&&(t=void 0),this.control&&this.control.reset(t)},t.prototype.hasError=function(t,e){return void 0===e&&(e=null),!!this.control&&this.control.hasError(t,e)},t.prototype.getError=function(t,e){return void 0===e&&(e=null),this.control?this.control.getError(t,e):null},t}(),G=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},H=function(t){function e(){t.apply(this,arguments)}return G(e,t),Object.defineProperty(e.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),e}(U),L=function(){function t(){}return t.merge=function(t,e){for(var n={},o=0,r=Object.keys(t);o<r.length;o++){var i=r[o];n[i]=t[i]}for(var a=0,s=Object.keys(e);a<s.length;a++){var i=s[a];n[i]=e[i]}return n},t.equals=function(t,e){var n=Object.keys(t),o=Object.keys(e);if(n.length!=o.length)return!1;for(var r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0},t}(),B=function(){function t(){}return t.removeAll=function(t,e){for(var n=0;n<e.length;++n){var o=t.indexOf(e[n]);o>-1&&t.splice(o,1)}},t.remove=function(t,e){var n=t.indexOf(e);return n>-1&&(t.splice(n,1),!0)},t.equals=function(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0},t.flatten=function(e){return e.reduce(function(e,n){var o=Array.isArray(n)?t.flatten(n):n;return e.concat(o)},[])},t}(),W=e.__core_private__.isPromise,q=new e.OpaqueToken("NgValidators"),z=new e.OpaqueToken("NgAsyncValidators"),X=function(){function t(){}return t.required=function(t){return h(t.value)?{required:!0}:null},t.minLength=function(t){return function(e){if(h(e.value))return null;var n="string"==typeof e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}},t.maxLength=function(t){return function(e){var n="string"==typeof e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}},t.pattern=function(e){if(!e)return t.nullValidator;var n,o;return"string"==typeof e?(o="^"+e+"$",n=new RegExp(o)):(o=e.toString(),n=e),function(t){if(h(t.value))return null;var e=t.value;return n.test(e)?null:{pattern:{requiredPattern:o,actualValue:e}}}},t.nullValidator=function(t){return null},t.compose=function(t){if(!t)return null;var e=t.filter(a);return 0==e.length?null:function(t){return g(f(t,e))}},t.composeAsync=function(t){if(!t)return null;var e=t.filter(a);return 0==e.length?null:function(t){var n=d(t,e).map(p);return Promise.all(n).then(g)}},t}(),Y=new e.OpaqueToken("NgValueAccessor"),$={provide:Y,useExisting:e.forwardRef(function(){return J}),multi:!0},J=function(){function t(t,e){this._renderer=t,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){this._renderer.setElementProperty(this._elementRef.nativeElement,"checked",t)},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setElementProperty(this._elementRef.nativeElement,"disabled",t)},t.decorators=[{type:e.Directive,args:[{selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[$]}]}],t.ctorParameters=[{type:e.Renderer},{type:e.ElementRef}],t}(),K={provide:Y,useExisting:e.forwardRef(function(){return Q}),multi:!0},Q=function(){function t(t,e){this._renderer=t,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){var e=null==t?"":t;this._renderer.setElementProperty(this._elementRef.nativeElement,"value",e)},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setElementProperty(this._elementRef.nativeElement,"disabled",t)},t.decorators=[{type:e.Directive,args:[{selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[K]}]}],t.ctorParameters=[{type:e.Renderer},{type:e.ElementRef}],t}(),Z={provide:Y,useExisting:e.forwardRef(function(){return tt}),multi:!0},tt=function(){function t(t,e){this._renderer=t,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){var e=null==t?"":t;this._renderer.setElementProperty(this._elementRef.nativeElement,"value",e)},t.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setElementProperty(this._elementRef.nativeElement,"disabled",t)},t.decorators=[{type:e.Directive,args:[{selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[Z]}]}],t.ctorParameters=[{type:e.Renderer},{type:e.ElementRef}],t}(),et=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},nt=function(t){function e(){t.apply(this,arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}return et(e,t),Object.defineProperty(e.prototype,"validator",{get:function(){return v()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return v()},enumerable:!0,configurable:!0}),e}(U),ot={provide:Y,useExisting:e.forwardRef(function(){return it}),multi:!0},rt=function(){function t(){this._accessors=[]}return t.prototype.add=function(t,e){this._accessors.push([t,e])},t.prototype.remove=function(t){for(var e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)},t.prototype.select=function(t){var e=this;this._accessors.forEach(function(n){e._isSameGroup(n,t)&&n[1]!==t&&n[1].fireUncheck(t.value)})},t.prototype._isSameGroup=function(t,e){return!!t[0].control&&(t[0]._parent===e._control._parent&&t[1].name===e.name)},t.decorators=[{type:e.Injectable}],t.ctorParameters=[],t}(),it=function(){function t(t,e,n,o){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=o,this.onChange=function(){},this.onTouched=function(){}}return t.prototype.ngOnInit=function(){this._control=this._injector.get(nt),this._checkName(),this._registry.add(this._control,this)},t.prototype.ngOnDestroy=function(){this._registry.remove(this)},t.prototype.writeValue=function(t){this._state=t===this.value,this._renderer.setElementProperty(this._elementRef.nativeElement,"checked",this._state)},t.prototype.registerOnChange=function(t){var e=this;this._fn=t,this.onChange=function(){t(e.value),e._registry.select(e)}},t.prototype.fireUncheck=function(t){this.writeValue(t)},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setElementProperty(this._elementRef.nativeElement,"disabled",t)},t.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},t.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},t.decorators=[{type:e.Directive,args:[{selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[ot]}]}],t.ctorParameters=[{type:e.Renderer},{type:e.ElementRef},{type:rt},{type:e.Injector}],t.propDecorators={name:[{type:e.Input}],formControlName:[{type:e.Input}],value:[{type:e.Input}]},t}(),at={provide:Y,useExisting:e.forwardRef(function(){return st}),multi:!0},st=function(){function t(t,e){this._renderer=t,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){this._renderer.setElementProperty(this._elementRef.nativeElement,"value",parseFloat(t))},t.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setElementProperty(this._elementRef.nativeElement,"disabled",t)},t.decorators=[{type:e.Directive,args:[{selector:"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[at]}]}],t.ctorParameters=[{type:e.Renderer},{type:e.ElementRef}],t}(),ct={provide:Y,useExisting:e.forwardRef(function(){return ut}),multi:!0},ut=function(){function t(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){this.value=t;var e=b(this._getOptionId(t),t);this._renderer.setElementProperty(this._elementRef.nativeElement,"value",e)},t.prototype.registerOnChange=function(t){var e=this;this.onChange=function(n){e.value=n,t(e._getOptionValue(n))}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setElementProperty(this._elementRef.nativeElement,"disabled",t)},t.prototype._registerOption=function(){return(this._idCounter++).toString()},t.prototype._getOptionId=function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var o=n[e];if(c(this._optionMap.get(o),t))return o}return null},t.prototype._getOptionValue=function(t){var e=_(t);return this._optionMap.has(e)?this._optionMap.get(e):t},t.decorators=[{type:e.Directive,args:[{selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[ct]}]}],t.ctorParameters=[{type:e.Renderer},{type:e.ElementRef}],t}(),lt=function(){function t(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}return Object.defineProperty(t.prototype,"ngValue",{set:function(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(b(this.id,t)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{set:function(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),t.prototype._setElementValue=function(t){this._renderer.setElementProperty(this._element.nativeElement,"value",t)},t.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},t.decorators=[{type:e.Directive,args:[{selector:"option"}]}],t.ctorParameters=[{type:e.ElementRef},{type:e.Renderer},{type:ut,decorators:[{type:e.Optional},{type:e.Host}]}],t.propDecorators={ngValue:[{type:e.Input,args:["ngValue"]}],value:[{type:e.Input,args:["value"]}]},t}(),ht={provide:Y,useExisting:e.forwardRef(function(){return pt}),multi:!0},pt=function(){function t(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.writeValue=function(t){var e=this;if(this.value=t,null!=t){var n=t,o=n.map(function(t){return e._getOptionId(t)});this._optionMap.forEach(function(t,e){t._setSelected(o.indexOf(e.toString())>-1)})}},t.prototype.registerOnChange=function(t){var e=this;this.onChange=function(n){var o=[];if(n.hasOwnProperty("selectedOptions"))for(var r=n.selectedOptions,i=0;i<r.length;i++){var a=r.item(i),s=e._getOptionValue(a.value);o.push(s)}else for(var r=n.options,i=0;i<r.length;i++){var a=r.item(i);if(a.selected){var s=e._getOptionValue(a.value);o.push(s)}}t(o)}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this._renderer.setElementProperty(this._elementRef.nativeElement,"disabled",t)},t.prototype._registerOption=function(t){var e=(this._idCounter++).toString();return this._optionMap.set(e,t),e},t.prototype._getOptionId=function(t){for(var e=0,n=Array.from(this._optionMap.keys());e<n.length;e++){var o=n[e];if(c(this._optionMap.get(o)._value,t))return o}return null},t.prototype._getOptionValue=function(t){var e=S(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t},t.decorators=[{type:e.Directive,args:[{selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[ht]}]}],t.ctorParameters=[{type:e.Renderer},{type:e.ElementRef}],t}(),ft=function(){function t(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}return Object.defineProperty(t.prototype,"ngValue",{set:function(t){null!=this._select&&(this._value=t,this._setElementValue(C(this.id,t)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{set:function(t){this._select?(this._value=t,this._setElementValue(C(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)},enumerable:!0,configurable:!0}),t.prototype._setElementValue=function(t){this._renderer.setElementProperty(this._element.nativeElement,"value",t)},t.prototype._setSelected=function(t){this._renderer.setElementProperty(this._element.nativeElement,"selected",t)},t.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},t.decorators=[{type:e.Directive,args:[{selector:"option"}]}],t.ctorParameters=[{type:e.ElementRef},{type:e.Renderer},{type:pt,decorators:[{type:e.Optional},{type:e.Host}]}],t.propDecorators={ngValue:[{type:e.Input,args:["ngValue"]}],value:[{type:e.Input,args:["value"]}]},t}(),dt=[J,st,tt,ut,pt,it],gt=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},yt=function(t){function e(){t.apply(this,arguments)}return gt(e,t),e.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},e.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(e.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return P(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validator",{get:function(){return x(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return T(this._asyncValidators)},enumerable:!0,configurable:!0}),e.prototype._checkParentType=function(){},e}(H),mt=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},vt=function(){function t(t){this._cd=t}return Object.defineProperty(t.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),t}(),bt={"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid","[class.ng-pending]":"ngClassPending"},_t=function(t){function n(e){t.call(this,e)}return mt(n,t),n.decorators=[{type:e.Directive,args:[{selector:"[formControlName],[ngModel],[formControl]",host:bt}]}],n.ctorParameters=[{type:nt,decorators:[{type:e.Self}]}],n}(vt),Ct=function(t){function n(e){t.call(this,e)}return mt(n,t),n.decorators=[{type:e.Directive,args:[{selector:"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]",host:bt}]}],n.ctorParameters=[{type:H,decorators:[{type:e.Self}]}],n}(vt),St=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Pt=function(t){function e(e){void 0===e&&(e=!1),t.call(this),this.__isAsync=e}return St(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,o){var r,i=function(t){return null},a=function(){return null};return e&&"object"==typeof e?(r=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(i=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(a=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(r=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(i=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),o&&(a=this.__isAsync?function(){setTimeout(function(){return o()})}:function(){o()})),t.prototype.subscribe.call(this,r,i,a)},e}(o.Subject),wt=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Et="VALID",Ot="INVALID",Dt="PENDING",It="DISABLED",xt=function(){function t(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=function(){},this._pristine=!0,this._touched=!1,this._onDisabledChange=[]}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this._status===Et},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invalid",{get:function(){return this._status===Ot},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pending",{get:function(){return this._status==Dt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._status===It},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this._status!==It},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errors",{get:function(){return this._errors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pristine",{get:function(){return this._pristine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touched",{get:function(){return this._touched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"untouched",{get:function(){return!this._touched},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueChanges",{get:function(){return this._valueChanges},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"statusChanges",{get:function(){return this._statusChanges},enumerable:!0,configurable:!0}),t.prototype.setValidators=function(t){this.validator=j(t)},t.prototype.setAsyncValidators=function(t){this.asyncValidator=F(t)},t.prototype.clearValidators=function(){this.validator=null},t.prototype.clearAsyncValidators=function(){this.asyncValidator=null},t.prototype.markAsTouched=function(t){var e=(void 0===t?{}:t).onlySelf;this._touched=!0,this._parent&&!e&&this._parent.markAsTouched({onlySelf:e})},t.prototype.markAsUntouched=function(t){var e=(void 0===t?{}:t).onlySelf;this._touched=!1,this._forEachChild(function(t){t.markAsUntouched({onlySelf:!0})}),this._parent&&!e&&this._parent._updateTouched({onlySelf:e})},t.prototype.markAsDirty=function(t){var e=(void 0===t?{}:t).onlySelf;this._pristine=!1,this._parent&&!e&&this._parent.markAsDirty({onlySelf:e})},t.prototype.markAsPristine=function(t){var e=(void 0===t?{}:t).onlySelf;this._pristine=!0,this._forEachChild(function(t){t.markAsPristine({onlySelf:!0})}),this._parent&&!e&&this._parent._updatePristine({onlySelf:e})},t.prototype.markAsPending=function(t){var e=(void 0===t?{}:t).onlySelf;this._status=Dt,this._parent&&!e&&this._parent.markAsPending({onlySelf:e})},t.prototype.disable=function(t){var e=void 0===t?{}:t,n=e.onlySelf,o=e.emitEvent;this._status=It,this._errors=null,this._forEachChild(function(t){t.disable({onlySelf:!0})}),this._updateValue(),o!==!1&&(this._valueChanges.emit(this._value),this._statusChanges.emit(this._status)),this._updateAncestors(n),this._onDisabledChange.forEach(function(t){return t(!0)})},t.prototype.enable=function(t){var e=void 0===t?{}:t,n=e.onlySelf,o=e.emitEvent;this._status=Et,this._forEachChild(function(t){t.enable({onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:o}),this._updateAncestors(n),this._onDisabledChange.forEach(function(t){return t(!1)})},t.prototype._updateAncestors=function(t){this._parent&&!t&&(this._parent.updateValueAndValidity(),this._parent._updatePristine(),this._parent._updateTouched())},t.prototype.setParent=function(t){this._parent=t},t.prototype.updateValueAndValidity=function(t){var e=void 0===t?{}:t,n=e.onlySelf,o=e.emitEvent;this._setInitialStatus(),this._updateValue(),this.enabled&&(this._errors=this._runValidator(),this._status=this._calculateStatus(),this._status!==Et&&this._status!==Dt||this._runAsyncValidator(o)),o!==!1&&(this._valueChanges.emit(this._value),this._statusChanges.emit(this._status)),this._parent&&!n&&this._parent.updateValueAndValidity({onlySelf:n,emitEvent:o})},t.prototype._updateTreeValidity=function(t){var e=(void 0===t?{emitEvent:!0}:t).emitEvent;this._forEachChild(function(t){return t._updateTreeValidity({emitEvent:e})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e})},t.prototype._setInitialStatus=function(){this._status=this._allControlsDisabled()?It:Et},t.prototype._runValidator=function(){return this.validator?this.validator(this):null},t.prototype._runAsyncValidator=function(t){var e=this;if(this.asyncValidator){this._status=Dt,this._cancelExistingSubscription();var n=M(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe({next:function(n){return e.setErrors(n,{emitEvent:t})}})}},t.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe();
},t.prototype.setErrors=function(t,e){var n=(void 0===e?{}:e).emitEvent;this._errors=t,this._updateControlsErrors(n!==!1)},t.prototype.get=function(t){return V(this,t,".")},t.prototype.getError=function(t,e){void 0===e&&(e=null);var n=e?this.get(e):this;return n&&n._errors?n._errors[t]:null},t.prototype.hasError=function(t,e){return void 0===e&&(e=null),!!this.getError(t,e)},Object.defineProperty(t.prototype,"root",{get:function(){for(var t=this;t._parent;)t=t._parent;return t},enumerable:!0,configurable:!0}),t.prototype._updateControlsErrors=function(t){this._status=this._calculateStatus(),t&&this._statusChanges.emit(this._status),this._parent&&this._parent._updateControlsErrors(t)},t.prototype._initObservables=function(){this._valueChanges=new Pt,this._statusChanges=new Pt},t.prototype._calculateStatus=function(){return this._allControlsDisabled()?It:this._errors?Ot:this._anyControlsHaveStatus(Dt)?Dt:this._anyControlsHaveStatus(Ot)?Ot:Et},t.prototype._anyControlsHaveStatus=function(t){return this._anyControls(function(e){return e.status===t})},t.prototype._anyControlsDirty=function(){return this._anyControls(function(t){return t.dirty})},t.prototype._anyControlsTouched=function(){return this._anyControls(function(t){return t.touched})},t.prototype._updatePristine=function(t){var e=(void 0===t?{}:t).onlySelf;this._pristine=!this._anyControlsDirty(),this._parent&&!e&&this._parent._updatePristine({onlySelf:e})},t.prototype._updateTouched=function(t){var e=(void 0===t?{}:t).onlySelf;this._touched=this._anyControlsTouched(),this._parent&&!e&&this._parent._updateTouched({onlySelf:e})},t.prototype._isBoxedValue=function(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t},t.prototype._registerOnCollectionChange=function(t){this._onCollectionChange=t},t}(),Tt=function(t){function e(e,n,o){void 0===e&&(e=null),void 0===n&&(n=null),void 0===o&&(o=null),t.call(this,j(n),F(o)),this._onChange=[],this._applyFormState(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}return wt(e,t),e.prototype.setValue=function(t,e){var n=this,o=void 0===e?{}:e,r=o.onlySelf,i=o.emitEvent,a=o.emitModelToViewChange,s=o.emitViewToModelChange;this._value=t,this._onChange.length&&a!==!1&&this._onChange.forEach(function(t){return t(n._value,s!==!1)}),this.updateValueAndValidity({onlySelf:r,emitEvent:i})},e.prototype.patchValue=function(t,e){void 0===e&&(e={}),this.setValue(t,e)},e.prototype.reset=function(t,e){void 0===t&&(t=null);var n=void 0===e?{}:e,o=n.onlySelf,r=n.emitEvent;this._applyFormState(t),this.markAsPristine({onlySelf:o}),this.markAsUntouched({onlySelf:o}),this.setValue(this._value,{onlySelf:o,emitEvent:r})},e.prototype._updateValue=function(){},e.prototype._anyControls=function(t){return!1},e.prototype._allControlsDisabled=function(){return this.disabled},e.prototype.registerOnChange=function(t){this._onChange.push(t)},e.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},e.prototype.registerOnDisabledChange=function(t){this._onDisabledChange.push(t)},e.prototype._forEachChild=function(t){},e.prototype._applyFormState=function(t){this._isBoxedValue(t)?(this._value=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this._value=t},e}(xt),kt=function(t){function e(e,n,o){void 0===n&&(n=null),void 0===o&&(o=null),t.call(this,n,o),this.controls=e,this._initObservables(),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}return wt(e,t),e.prototype.registerControl=function(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)},e.prototype.addControl=function(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.removeControl=function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.setControl=function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.contains=function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled},e.prototype.setValue=function(t,e){var n=this,o=void 0===e?{}:e,r=o.onlySelf,i=o.emitEvent;this._checkAllValuesPresent(t),Object.keys(t).forEach(function(e){n._throwIfControlMissing(e),n.controls[e].setValue(t[e],{onlySelf:!0,emitEvent:i})}),this.updateValueAndValidity({onlySelf:r,emitEvent:i})},e.prototype.patchValue=function(t,e){var n=this,o=void 0===e?{}:e,r=o.onlySelf,i=o.emitEvent;Object.keys(t).forEach(function(e){n.controls[e]&&n.controls[e].patchValue(t[e],{onlySelf:!0,emitEvent:i})}),this.updateValueAndValidity({onlySelf:r,emitEvent:i})},e.prototype.reset=function(t,e){void 0===t&&(t={});var n=void 0===e?{}:e,o=n.onlySelf,r=n.emitEvent;this._forEachChild(function(e,n){e.reset(t[n],{onlySelf:!0,emitEvent:r})}),this.updateValueAndValidity({onlySelf:o,emitEvent:r}),this._updatePristine({onlySelf:o}),this._updateTouched({onlySelf:o})},e.prototype.getRawValue=function(){return this._reduceChildren({},function(t,e,n){return t[n]=e.value,t})},e.prototype._throwIfControlMissing=function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: "+t+".")},e.prototype._forEachChild=function(t){var e=this;Object.keys(this.controls).forEach(function(n){return t(e.controls[n],n)})},e.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})},e.prototype._updateValue=function(){this._value=this._reduceValue()},e.prototype._anyControls=function(t){var e=this,n=!1;return this._forEachChild(function(o,r){n=n||e.contains(r)&&t(o)}),n},e.prototype._reduceValue=function(){var t=this;return this._reduceChildren({},function(e,n,o){return(n.enabled||t.disabled)&&(e[o]=n.value),e})},e.prototype._reduceChildren=function(t,e){var n=t;return this._forEachChild(function(t,o){n=e(n,t,o)}),n},e.prototype._allControlsDisabled=function(){for(var t=0,e=Object.keys(this.controls);t<e.length;t++){var n=e[t];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled},e.prototype._checkAllValuesPresent=function(t){this._forEachChild(function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control with name: '"+n+"'.")})},e}(xt),At=function(t){function e(e,n,o){void 0===n&&(n=null),void 0===o&&(o=null),t.call(this,n,o),this.controls=e,this._initObservables(),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}return wt(e,t),e.prototype.at=function(t){return this.controls[t]},e.prototype.push=function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.insert=function(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.removeAt=function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),this.updateValueAndValidity(),this._onCollectionChange()},e.prototype.setControl=function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(e.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),e.prototype.setValue=function(t,e){var n=this,o=void 0===e?{}:e,r=o.onlySelf,i=o.emitEvent;this._checkAllValuesPresent(t),t.forEach(function(t,e){n._throwIfControlMissing(e),n.at(e).setValue(t,{onlySelf:!0,emitEvent:i})}),this.updateValueAndValidity({onlySelf:r,emitEvent:i})},e.prototype.patchValue=function(t,e){var n=this,o=void 0===e?{}:e,r=o.onlySelf,i=o.emitEvent;t.forEach(function(t,e){n.at(e)&&n.at(e).patchValue(t,{onlySelf:!0,emitEvent:i})}),this.updateValueAndValidity({onlySelf:r,emitEvent:i})},e.prototype.reset=function(t,e){void 0===t&&(t=[]);var n=void 0===e?{}:e,o=n.onlySelf,r=n.emitEvent;this._forEachChild(function(e,n){e.reset(t[n],{onlySelf:!0,emitEvent:r})}),this.updateValueAndValidity({onlySelf:o,emitEvent:r}),this._updatePristine({onlySelf:o}),this._updateTouched({onlySelf:o})},e.prototype.getRawValue=function(){return this.controls.map(function(t){return t.value})},e.prototype._throwIfControlMissing=function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)},e.prototype._forEachChild=function(t){this.controls.forEach(function(e,n){t(e,n)})},e.prototype._updateValue=function(){var t=this;this._value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(t){return t.value})},e.prototype._anyControls=function(t){return this.controls.some(function(e){return e.enabled&&t(e)})},e.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})},e.prototype._checkAllValuesPresent=function(t){this._forEachChild(function(e,n){if(void 0===t[n])throw new Error("Must supply a value for form control at index: "+n+".")})},e.prototype._allControlsDisabled=function(){for(var t=0,e=this.controls;t<e.length;t++){var n=e[t];if(n.enabled)return!1}return this.controls.length>0||this.disabled},e.prototype._registerControl=function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)},e}(xt),Rt=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Vt={provide:H,useExisting:e.forwardRef(function(){return jt})},Mt=Promise.resolve(null),jt=function(t){function n(e,n){t.call(this),this._submitted=!1,this.ngSubmit=new Pt,this.form=new kt({},x(e),T(n))}return Rt(n,t),Object.defineProperty(n.prototype,"submitted",{get:function(){return this._submitted},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),n.prototype.addControl=function(t){var e=this;Mt.then(function(){var n=e._findContainer(t.path);t._control=n.registerControl(t.name,t.control),w(t.control,t),t.control.updateValueAndValidity({emitEvent:!1})})},n.prototype.getControl=function(t){return this.form.get(t.path)},n.prototype.removeControl=function(t){var e=this;Mt.then(function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name)})},n.prototype.addFormGroup=function(t){var e=this;Mt.then(function(){var n=e._findContainer(t.path),o=new kt({});O(o,t),n.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})},n.prototype.removeFormGroup=function(t){var e=this;Mt.then(function(){var n=e._findContainer(t.path);n&&n.removeControl(t.name)})},n.prototype.getFormGroup=function(t){return this.form.get(t.path)},n.prototype.updateModel=function(t,e){var n=this;Mt.then(function(){var o=n.form.get(t.path);o.setValue(e)})},n.prototype.setValue=function(t){this.control.setValue(t)},n.prototype.onSubmit=function(t){return this._submitted=!0,this.ngSubmit.emit(t),!1},n.prototype.onReset=function(){this.resetForm()},n.prototype.resetForm=function(t){void 0===t&&(t=void 0),this.form.reset(t),this._submitted=!1},n.prototype._findContainer=function(t){return t.pop(),t.length?this.form.get(t):this.form},n.decorators=[{type:e.Directive,args:[{selector:"form:not([ngNoForm]):not([formGroup]),ngForm,[ngForm]",providers:[Vt],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}]}],n.ctorParameters=[{type:Array,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[q]}]},{type:Array,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[z]}]}],n}(H),Ft={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; let i=index">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '},Nt=function(){function t(){}return t.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+Ft.formControlName+"\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      "+Ft.ngModelWithFormGroup)},t.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+Ft.formGroupName+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+Ft.ngModelGroup)},t.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},t.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+Ft.formGroupName+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+Ft.ngModelGroup)},t}(),Ut=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Gt={provide:H,useExisting:e.forwardRef(function(){return Ht})},Ht=function(t){function n(e,n,o){t.call(this),this._parent=e,this._validators=n,this._asyncValidators=o}return Ut(n,t),n.prototype._checkParentType=function(){this._parent instanceof n||this._parent instanceof jt||Nt.modelGroupParentException()},n.decorators=[{type:e.Directive,args:[{selector:"[ngModelGroup]",providers:[Gt],exportAs:"ngModelGroup"}]}],n.ctorParameters=[{type:H,decorators:[{type:e.Host},{type:e.SkipSelf}]},{type:Array,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[q]}]},{type:Array,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[z]}]}],n.propDecorators={name:[{type:e.Input,args:["ngModelGroup"]}]},n}(yt),Lt=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Bt={provide:nt,useExisting:e.forwardRef(function(){return qt})},Wt=Promise.resolve(null),qt=function(t){function n(e,n,o,r){t.call(this),this._control=new Tt,this._registered=!1,this.update=new Pt,this._parent=e,this._rawValidators=n||[],this._rawAsyncValidators=o||[],this.valueAccessor=R(this,r)}return Lt(n,t),n.prototype.ngOnChanges=function(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),k(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},n.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(n.prototype,"control",{get:function(){return this._control},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this._parent?P(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"validator",{get:function(){return x(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"asyncValidator",{get:function(){return T(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),n.prototype.viewToModelUpdate=function(t){this.viewModel=t,this.update.emit(t)},n.prototype._setUpControl=function(){this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},n.prototype._isStandalone=function(){return!this._parent||this.options&&this.options.standalone},n.prototype._setUpStandalone=function(){w(this._control,this),this._control.updateValueAndValidity({emitEvent:!1})},n.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},n.prototype._checkParentType=function(){!(this._parent instanceof Ht)&&this._parent instanceof yt?Nt.formGroupNameException():this._parent instanceof Ht||this._parent instanceof jt||Nt.modelParentException()},n.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Nt.missingNameException()},n.prototype._updateValue=function(t){var e=this;Wt.then(function(){e.control.setValue(t,{emitViewToModelChange:!1})})},n.prototype._updateDisabled=function(t){var e=this,n=t.isDisabled.currentValue,o=""===n||n&&"false"!==n;Wt.then(function(){o&&!e.control.disabled?e.control.disable():!o&&e.control.disabled&&e.control.enable()})},n.decorators=[{type:e.Directive,args:[{selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[Bt],exportAs:"ngModel"}]}],n.ctorParameters=[{type:H,decorators:[{type:e.Optional},{type:e.Host}]},{type:Array,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[q]}]},{type:Array,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[z]}]},{type:Array,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[Y]}]}],n.propDecorators={name:[{type:e.Input}],isDisabled:[{type:e.Input,args:["disabled"]}],model:[{type:e.Input,args:["ngModel"]}],options:[{type:e.Input,args:["ngModelOptions"]}],update:[{type:e.Output,args:["ngModelChange"]}]},n}(nt),zt=function(){function t(){}return t.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Ft.formControlName)},t.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+Ft.formGroupName+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+Ft.ngModelGroup)},t.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+Ft.formControlName)},t.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Ft.formGroupName)},t.arrayParentException=function(){throw new Error("formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        "+Ft.formArrayName)},t.disabledAttrWarning=function(){},t}(),Xt=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Yt={provide:nt,useExisting:e.forwardRef(function(){return $t})},$t=function(t){function n(e,n,o){t.call(this),this.update=new Pt,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=R(this,o)}return Xt(n,t),Object.defineProperty(n.prototype,"isDisabled",{set:function(t){zt.disabledAttrWarning()},enumerable:!0,configurable:!0}),n.prototype.ngOnChanges=function(t){this._isControlChanged(t)&&(w(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),k(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)},Object.defineProperty(n.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"validator",{get:function(){return x(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"asyncValidator",{get:function(){return T(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),n.prototype.viewToModelUpdate=function(t){this.viewModel=t,this.update.emit(t)},n.prototype._isControlChanged=function(t){return t.hasOwnProperty("form")},n.decorators=[{type:e.Directive,args:[{selector:"[formControl]",providers:[Yt],exportAs:"ngForm"}]}],n.ctorParameters=[{type:Array,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[q]}]},{type:Array,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[z]}]},{type:Array,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[Y]}]}],n.propDecorators={form:[{type:e.Input,args:["formControl"]}],model:[{type:e.Input,args:["ngModel"]}],update:[{type:e.Output,args:["ngModelChange"]}],isDisabled:[{type:e.Input,args:["disabled"]}]},n}(nt),Jt=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Kt={provide:H,useExisting:e.forwardRef(function(){return Qt})},Qt=function(t){function n(e,n){t.call(this),this._validators=e,this._asyncValidators=n,this._submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new Pt}return Jt(n,t),n.prototype.ngOnChanges=function(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())},Object.defineProperty(n.prototype,"submitted",{get:function(){return this._submitted},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),n.prototype.addControl=function(t){var e=this.form.get(t.path);return w(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e},n.prototype.getControl=function(t){return this.form.get(t.path)},n.prototype.removeControl=function(t){B.remove(this.directives,t)},n.prototype.addFormGroup=function(t){var e=this.form.get(t.path);O(e,t),e.updateValueAndValidity({emitEvent:!1})},n.prototype.removeFormGroup=function(t){},n.prototype.getFormGroup=function(t){return this.form.get(t.path)},n.prototype.addFormArray=function(t){var e=this.form.get(t.path);O(e,t),e.updateValueAndValidity({emitEvent:!1})},n.prototype.removeFormArray=function(t){},n.prototype.getFormArray=function(t){return this.form.get(t.path)},n.prototype.updateModel=function(t,e){var n=this.form.get(t.path);n.setValue(e)},n.prototype.onSubmit=function(t){return this._submitted=!0,this.ngSubmit.emit(t),!1},n.prototype.onReset=function(){this.resetForm()},n.prototype.resetForm=function(t){void 0===t&&(t=void 0),this.form.reset(t),this._submitted=!1},n.prototype._updateDomValue=function(){var t=this;this.directives.forEach(function(e){var n=t.form.get(e.path);e._control!==n&&(E(e._control,e),n&&w(n,e),e._control=n)}),this.form._updateTreeValidity({emitEvent:!1})},n.prototype._updateRegistrations=function(){var t=this;this.form._registerOnCollectionChange(function(){return t._updateDomValue()}),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){}),this._oldForm=this.form},n.prototype._updateValidators=function(){var t=x(this._validators);this.form.validator=X.compose([this.form.validator,t]);var e=T(this._asyncValidators);this.form.asyncValidator=X.composeAsync([this.form.asyncValidator,e])},n.prototype._checkFormPresent=function(){this.form||zt.missingFormException()},n.decorators=[{type:e.Directive,args:[{selector:"[formGroup]",providers:[Kt],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},exportAs:"ngForm"}]}],n.ctorParameters=[{type:Array,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[q]}]},{type:Array,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[z]}]}],n.propDecorators={form:[{type:e.Input,args:["formGroup"]}],ngSubmit:[{type:e.Output}]},n}(H),Zt=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},te={provide:H,useExisting:e.forwardRef(function(){return ee})},ee=function(t){function n(e,n,o){t.call(this),this._parent=e,this._validators=n,this._asyncValidators=o}return Zt(n,t),n.prototype._checkParentType=function(){N(this._parent)&&zt.groupParentException()},n.decorators=[{type:e.Directive,args:[{selector:"[formGroupName]",providers:[te]}]}],n.ctorParameters=[{type:H,decorators:[{type:e.Optional},{type:e.Host},{type:e.SkipSelf}]},{type:Array,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[q]}]},{type:Array,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[z]}]}],n.propDecorators={name:[{type:e.Input,args:["formGroupName"]}]},n}(yt),ne={provide:H,useExisting:e.forwardRef(function(){return oe})},oe=function(t){function n(e,n,o){t.call(this),this._parent=e,this._validators=n,this._asyncValidators=o}return Zt(n,t),n.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},n.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormArray(this)},Object.defineProperty(n.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return P(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"validator",{get:function(){return x(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"asyncValidator",{get:function(){return T(this._asyncValidators)},enumerable:!0,configurable:!0}),n.prototype._checkParentType=function(){N(this._parent)&&zt.arrayParentException()},n.decorators=[{type:e.Directive,args:[{selector:"[formArrayName]",providers:[ne]}]}],n.ctorParameters=[{type:H,decorators:[{type:e.Optional},{type:e.Host},{type:e.SkipSelf}]},{type:Array,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[q]}]},{type:Array,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[z]}]}],n.propDecorators={name:[{type:e.Input,args:["formArrayName"]}]},n}(H),re=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},ie={provide:nt,useExisting:e.forwardRef(function(){return ae})},ae=function(t){function n(e,n,o,r){t.call(this),this._added=!1,this.update=new Pt,this._parent=e,this._rawValidators=n||[],this._rawAsyncValidators=o||[],this.valueAccessor=R(this,r)}return re(n,t),Object.defineProperty(n.prototype,"isDisabled",{set:function(t){zt.disabledAttrWarning()},enumerable:!0,configurable:!0}),n.prototype.ngOnChanges=function(t){this._added||this._setUpControl(),k(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},n.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},n.prototype.viewToModelUpdate=function(t){this.viewModel=t,this.update.emit(t)},Object.defineProperty(n.prototype,"path",{get:function(){return P(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"validator",{get:function(){return x(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"asyncValidator",{get:function(){return T(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"control",{get:function(){return this._control},enumerable:!0,configurable:!0}),n.prototype._checkParentType=function(){!(this._parent instanceof ee)&&this._parent instanceof yt?zt.ngModelGroupException():this._parent instanceof ee||this._parent instanceof Qt||this._parent instanceof oe||zt.controlParentException()},n.prototype._setUpControl=function(){this._checkParentType(),this._control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0},n.decorators=[{type:e.Directive,args:[{selector:"[formControlName]",providers:[ie]}]}],n.ctorParameters=[{type:H,decorators:[{type:e.Optional},{type:e.Host},{type:e.SkipSelf}]},{type:Array,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[q]}]},{type:Array,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[z]}]},{type:Array,decorators:[{type:e.Optional},{type:e.Self},{type:e.Inject,args:[Y]}]}],n.propDecorators={name:[{type:e.Input,args:["formControlName"]}],model:[{type:e.Input,args:["ngModel"]}],update:[{type:e.Output,args:["ngModelChange"]}],isDisabled:[{type:e.Input,args:["disabled"]}]},n}(nt),se={provide:q,useExisting:e.forwardRef(function(){return ce}),multi:!0
},ce=function(){function t(){}return Object.defineProperty(t.prototype,"required",{get:function(){return this._required},set:function(t){this._required=null!=t&&t!==!1&&""+t!="false",this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),t.prototype.validate=function(t){return this.required?X.required(t):null},t.prototype.registerOnValidatorChange=function(t){this._onChange=t},t.decorators=[{type:e.Directive,args:[{selector:"[required][formControlName],[required][formControl],[required][ngModel]",providers:[se],host:{"[attr.required]":'required ? "" : null'}}]}],t.ctorParameters=[],t.propDecorators={required:[{type:e.Input}]},t}(),ue={provide:q,useExisting:e.forwardRef(function(){return le}),multi:!0},le=function(){function t(){}return t.prototype.ngOnChanges=function(t){"minlength"in t&&(this._createValidator(),this._onChange&&this._onChange())},t.prototype.validate=function(t){return null==this.minlength?null:this._validator(t)},t.prototype.registerOnValidatorChange=function(t){this._onChange=t},t.prototype._createValidator=function(){this._validator=X.minLength(parseInt(this.minlength,10))},t.decorators=[{type:e.Directive,args:[{selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[ue],host:{"[attr.minlength]":"minlength ? minlength : null"}}]}],t.ctorParameters=[],t.propDecorators={minlength:[{type:e.Input}]},t}(),he={provide:q,useExisting:e.forwardRef(function(){return pe}),multi:!0},pe=function(){function t(){}return t.prototype.ngOnChanges=function(t){"maxlength"in t&&(this._createValidator(),this._onChange&&this._onChange())},t.prototype.validate=function(t){return null!=this.maxlength?this._validator(t):null},t.prototype.registerOnValidatorChange=function(t){this._onChange=t},t.prototype._createValidator=function(){this._validator=X.maxLength(parseInt(this.maxlength,10))},t.decorators=[{type:e.Directive,args:[{selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[he],host:{"[attr.maxlength]":"maxlength ? maxlength : null"}}]}],t.ctorParameters=[],t.propDecorators={maxlength:[{type:e.Input}]},t}(),fe={provide:q,useExisting:e.forwardRef(function(){return de}),multi:!0},de=function(){function t(){}return t.prototype.ngOnChanges=function(t){"pattern"in t&&(this._createValidator(),this._onChange&&this._onChange())},t.prototype.validate=function(t){return this._validator(t)},t.prototype.registerOnValidatorChange=function(t){this._onChange=t},t.prototype._createValidator=function(){this._validator=X.pattern(this.pattern)},t.decorators=[{type:e.Directive,args:[{selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[fe],host:{"[attr.pattern]":"pattern ? pattern : null"}}]}],t.ctorParameters=[],t.propDecorators={pattern:[{type:e.Input}]},t}(),ge=function(){function t(){}return t.prototype.group=function(t,e){void 0===e&&(e=null);var n=this._reduceControls(t),o=a(e)?e.validator:null,r=a(e)?e.asyncValidator:null;return new kt(n,o,r)},t.prototype.control=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),new Tt(t,e,n)},t.prototype.array=function(t,e,n){var o=this;void 0===e&&(e=null),void 0===n&&(n=null);var r=t.map(function(t){return o._createControl(t)});return new At(r,e,n)},t.prototype._reduceControls=function(t){var e=this,n={};return Object.keys(t).forEach(function(o){n[o]=e._createControl(t[o])}),n},t.prototype._createControl=function(t){if(t instanceof Tt||t instanceof kt||t instanceof At)return t;if(Array.isArray(t)){var e=t[0],n=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(e,n,o)}return this.control(t)},t.decorators=[{type:e.Injectable}],t.ctorParameters=[],t}(),ye=[lt,ft,Q,tt,st,J,ut,pt,it,_t,Ct,ce,le,pe,de],me=[qt,Ht,jt],ve=[$t,Qt,ae,ee,oe],be=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:ye,exports:ye}]}],t.ctorParameters=[],t}(),_e=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:me,providers:[rt],exports:[be,me]}]}],t.ctorParameters=[],t}(),Ce=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[ve],providers:[ge,rt],exports:[be,ve]}]}],t.ctorParameters=[],t}();t.AbstractControlDirective=U,t.AbstractFormGroupDirective=yt,t.CheckboxControlValueAccessor=J,t.ControlContainer=H,t.NG_VALUE_ACCESSOR=Y,t.DefaultValueAccessor=Q,t.NgControl=nt,t.NgControlStatus=_t,t.NgControlStatusGroup=Ct,t.NgForm=jt,t.NgModel=qt,t.NgModelGroup=Ht,t.RadioControlValueAccessor=it,t.FormControlDirective=$t,t.FormControlName=ae,t.FormGroupDirective=Qt,t.FormArrayName=oe,t.FormGroupName=ee,t.NgSelectOption=lt,t.SelectControlValueAccessor=ut,t.SelectMultipleControlValueAccessor=pt,t.MaxLengthValidator=pe,t.MinLengthValidator=le,t.PatternValidator=de,t.RequiredValidator=ce,t.FormBuilder=ge,t.AbstractControl=xt,t.FormArray=At,t.FormControl=Tt,t.FormGroup=kt,t.NG_ASYNC_VALIDATORS=z,t.NG_VALIDATORS=q,t.Validators=X,t.FormsModule=_e,t.ReactiveFormsModule=Ce})},,,,function(t,e,n){"use strict";var o=n(29);e.ImageCropperModule=o.ImageCropperModule;var r=n(30);e.ImageCropperComponent=r.ImageCropperComponent;var i=n(31);e.ImageCropper=i.ImageCropper;var a=n(37);e.CropperSettings=a.CropperSettings;var s=n(38);e.CropperDrawSettings=s.CropperDrawSettings;var c=n(32);e.Bounds=c.Bounds},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t,e,n,o){var i,a=arguments.length,s=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(a<3?i(s):a>3?i(e,n,s):i(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s},a=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=n(22),c=n(3),u=n(30),l=function t(){o(this,t)};l=i([c.NgModule({imports:[s.CommonModule],declarations:[u.ImageCropperComponent],exports:[u.ImageCropperComponent]}),a("design:paramtypes",[])],l),e.ImageCropperModule=l},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t,e,n,o){var r,a=arguments.length,s=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(a<3?r(s):a>3?r(e,n,s):r(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s},s=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=n(3),u=n(31),l=n(37),h=n(43),p=function(){function t(e){o(this,t),this.onCrop=new c.EventEmitter,this.renderer=e}return r(t,[{key:"ngAfterViewInit",value:function(){var t=this.cropcanvas.nativeElement;this.settings||(this.settings=new l.CropperSettings),this.renderer.setElementAttribute(t,"width",this.settings.canvasWidth.toString()),this.renderer.setElementAttribute(t,"height",this.settings.canvasHeight.toString()),this.cropper||(this.cropper=new u.ImageCropper(this.settings)),this.cropper.prepare(t)}},{key:"onTouchMove",value:function(t){this.cropper.onTouchMove(t)}},{key:"onTouchStart",value:function(t){this.cropper.onTouchStart(t)}},{key:"onTouchEnd",value:function(t){this.cropper.onTouchEnd(t),this.cropper.isImageSet()&&(this.image.image=this.cropper.getCroppedImage().src,this.onCrop.emit(this.cropper.getCropBounds()))}},{key:"onMouseDown",value:function(t){this.cropper.onMouseDown(t)}},{key:"onMouseUp",value:function(t){this.cropper.isImageSet()&&(this.cropper.onMouseUp(t),this.image.image=this.cropper.getCroppedImage().src,this.onCrop.emit(this.cropper.getCropBounds()))}},{key:"onMouseMove",value:function(t){this.cropper.onMouseMove(t)}},{key:"fileChangeListener",value:function(t){var e=this,n=t.target.files[0];this.settings.allowedFilesRegex.test(n.name)&&!function(){var t=new Image,o=new FileReader,r=e;o.addEventListener("loadend",function(e){t.src=e.target.result,r.setImage(t)}),o.readAsDataURL(n)}()}},{key:"setImage",value:function(t){var e=this;this.intervalRef=window.setInterval(function(){e.intervalRef&&clearInterval(e.intervalRef),t.naturalHeight>0&&t.naturalWidth>0&&(t.height=t.naturalHeight,t.width=t.naturalWidth,clearInterval(e.intervalRef),e.getOrientedImage(t,function(t){e.cropper.setImage(t),e.image.original=t;var n=e.cropper.getCropBounds();e.image.image=e.cropper.getCroppedImage().src,e.onCrop.emit(n)}))},10)}},{key:"getOrientedImage",value:function(t,e){var n=void 0;h.Exif.getData(t,function(){var o=h.Exif.getTag(t,"Orientation");if([3,6,8].indexOf(o)>-1){var r=document.createElement("canvas"),i=r.getContext("2d"),a=t.width,s=t.height,c=0,u=0,l=0;switch(o){case 3:c=-t.width,u=-t.height,l=180;break;case 6:a=t.height,s=t.width,u=-t.height,l=90;break;case 8:a=t.height,s=t.width,c=-t.width,l=270}r.width=a,r.height=s,i.rotate(l*Math.PI/180),i.drawImage(t,c,u),n=document.createElement("img"),n.width=a,n.height=s,n.src=r.toDataURL("image/png")}else n=t;e(n)})}}]),t}();a([c.ViewChild("cropcanvas",void 0),s("design:type","function"==typeof(f="undefined"!=typeof c.ElementRef&&c.ElementRef)&&f||Object)],p.prototype,"cropcanvas",void 0),a([c.Input(),s("design:type","function"==typeof(d="undefined"!=typeof l.CropperSettings&&l.CropperSettings)&&d||Object)],p.prototype,"settings",void 0),a([c.Input(),s("design:type",Object)],p.prototype,"image",void 0),a([c.Input(),s("design:type","function"==typeof(g="undefined"!=typeof u.ImageCropper&&u.ImageCropper)&&g||Object)],p.prototype,"cropper",void 0),a([c.Output(),s("design:type","function"==typeof(y="undefined"!=typeof c.EventEmitter&&c.EventEmitter)&&y||Object)],p.prototype,"onCrop",void 0),p=a([c.Component({selector:"img-cropper",template:'\n        <span class="ng2-imgcrop">\n          <input *ngIf="!settings.noFileInput" type="file" (change)="fileChangeListener($event)" >\n          <canvas #cropcanvas\n                  (mousedown)="onMouseDown($event)"\n                  (mouseup)="onMouseUp($event)"\n                  (mousemove)="onMouseMove($event)"\n                  (mouseleave)="onMouseUp($event)"\n                  (touchmove)="onTouchMove($event)"\n                  (touchend)="onTouchEnd($event)"\n                  (touchstart)="onTouchStart($event)">\n          </canvas>\n        </span>\n      '}),s("design:paramtypes",["function"==typeof(m="undefined"!=typeof c.Renderer&&c.Renderer)&&m||Object])],p),e.ImageCropperComponent=p;var f,d,g,y,m},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(32),c=n(35),u=n(39),l=n(40),h=n(41),p=n(42),f=n(33),d=function(t){function e(t){o(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i=0,a=0,s=t.width,u=t.height,h=t.keepAspect,p=t.touchRadius,d=t.minWidth,g=t.minHeight,y=t.croppedWidth,m=t.croppedHeight;return n.cropperSettings=t,n.crop=n,n.x=i,n.y=a,void 0===s&&(n.width=100),void 0===u&&(n.height=50),void 0===h&&(n.keepAspect=!0),void 0===p&&(n.touchRadius=20),n.minWidth=d,n.minHeight=g,n.keepAspect=!1,n.aspectRatio=0,n.currentDragTouches=[],n.isMouseDown=!1,n.ratioW=1,n.ratioH=1,n.fileType=t.fileType,n.imageSet=!1,n.pointPool=new f.PointPool(200),n.tl=new c.CornerMarker(i,a,p,n.cropperSettings),n.tr=new c.CornerMarker(i+s,a,p,n.cropperSettings),n.bl=new c.CornerMarker(i,a+u,p,n.cropperSettings),n.br=new c.CornerMarker(i+s,a+u,p,n.cropperSettings),n.tl.addHorizontalNeighbour(n.tr),n.tl.addVerticalNeighbour(n.bl),n.tr.addHorizontalNeighbour(n.tl),n.tr.addVerticalNeighbour(n.br),n.bl.addHorizontalNeighbour(n.br),n.bl.addVerticalNeighbour(n.tl),n.br.addHorizontalNeighbour(n.bl),n.br.addVerticalNeighbour(n.tr),n.markers=[n.tl,n.tr,n.bl,n.br],n.center=new l.DragMarker(i+s/2,a+u/2,p,n.cropperSettings),n.keepAspect=h,n.aspectRatio=u/s,n.croppedImage=new Image,n.currentlyInteracting=!1,n.cropWidth=y,n.cropHeight=m,n}return i(e,t),a(e,[{key:"getDataUriMimeType",value:function(t){var e=t.substring(0,50),n="image/png",o=RegExp(/^(data:)([\w\/\+]+);(charset=[\w-]+|base64).*,(.*)/gi),r=o.exec(e);return r&&r[2]&&(n=r[2],"image/jpg"==n&&(n="image/jpeg")),n}},{key:"prepare",value:function(t){this.buffer=document.createElement("canvas"),this.cropCanvas=document.createElement("canvas");var e=t.parentElement.clientWidth;e>0&&this.cropperSettings.responsive?(this.cropCanvas.width=e,this.buffer.width=e,t.width=e):(this.cropCanvas.width=this.cropWidth,this.buffer.width=t.width),this.cropCanvas.height=this.cropHeight,this.buffer.height=t.height,this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.draw(this.ctx)}},{key:"resizeCanvas",value:function(t,e){this.canvas.width=t,this.canvas.height=e,this.buffer.width=t,this.buffer.height=e,this.draw(this.ctx)}},{key:"draw",value:function(t){var e=this.getBounds();if(this.srcImage){t.clearRect(0,0,this.canvasWidth,this.canvasHeight);var n=this.srcImage.height/this.srcImage.width,o=this.canvasHeight/this.canvasWidth,r=this.canvasWidth,i=this.canvasHeight;o>n?(r=this.canvasWidth,i=this.canvasWidth*n):(i=this.canvasHeight,r=this.canvasHeight/n),this.ratioW=r/this.srcImage.width,this.ratioH=i/this.srcImage.height,o<n?this.drawImageIOSFix(t,this.srcImage,0,0,this.srcImage.width,this.srcImage.height,this.buffer.width/2-r/2,0,r,i):this.drawImageIOSFix(t,this.srcImage,0,0,this.srcImage.width,this.srcImage.height,0,this.buffer.height/2-i/2,r,i),this.buffer.getContext("2d").drawImage(this.canvas,0,0,this.canvasWidth,this.canvasHeight),t.lineWidth=this.cropperSettings.cropperDrawSettings.strokeWidth,t.strokeStyle=this.cropperSettings.cropperDrawSettings.strokeColor,this.cropperSettings.rounded?(t.beginPath(),t.arc(e.left+e.width/2,e.top+e.height/2,e.width/2,0,2*Math.PI,!0),t.closePath(),t.stroke()):(t.fillStyle="rgba(0, 0, 0, 0.6)",t.fillRect(0,0,this.canvasWidth,this.canvasHeight),t.drawImage(this.buffer,e.left,e.top,Math.max(e.width,1),Math.max(e.height,1),e.left,e.top,e.width,e.height),t.strokeRect(e.left,e.top,e.width,e.height));for(var a=void 0,s=0;s<this.markers.length;s++)a=this.markers[s],a.draw(t);this.center.draw(t)}else t.fillStyle="rgba(192,192,192,1)",t.fillRect(0,0,this.canvas.width,this.canvas.height)}},{key:"dragCenter",value:function(t,e,n){var o=this.getBounds(),r=t-o.width/2,i=t+o.width/2,a=e-o.height/2,s=e+o.height/2;i>=this.maxXClamp&&(t=this.maxXClamp-o.width/2),r<=this.minXClamp&&(t=o.width/2+this.minXClamp),a<this.minYClamp&&(e=o.height/2+this.minYClamp),s>=this.maxYClamp&&(e=this.maxYClamp-o.height/2),this.tl.moveX(t-o.width/2),this.tl.moveY(e-o.height/2),this.tr.moveX(t+o.width/2),this.tr.moveY(e-o.height/2),this.bl.moveX(t-o.width/2),this.bl.moveY(e+o.height/2),this.br.moveX(t+o.width/2),this.br.moveY(e+o.height/2),n.setPosition(t,e)}},{key:"enforceMinSize",value:function(t,e,n){var o=t-n.getHorizontalNeighbour().position.x,r=e-n.getVerticalNeighbour().position.y,i=this.minWidth-Math.abs(o),a=this.minHeight-Math.abs(r);return 0===o||0===r?(t=n.position.x,e=n.position.y,f.PointPool.instance.borrow(t,e)):(this.keepAspect?i>0&&a/this.aspectRatio>0?i>a/this.aspectRatio?o<0?(t-=i,r<0?e-=i*this.aspectRatio:e+=i*this.aspectRatio):(t+=i,r<0?e-=i*this.aspectRatio:e+=i*this.aspectRatio):r<0?(e-=a,o<0?t-=a/this.aspectRatio:t+=a/this.aspectRatio):(e+=a,o<0?t-=a/this.aspectRatio:t+=a/this.aspectRatio):i>0?o<0?(t-=i,r<0?e-=i*this.aspectRatio:e+=i*this.aspectRatio):(t+=i,r<0?e-=i*this.aspectRatio:e+=i*this.aspectRatio):a>0&&(r<0?(e-=a,o<0?t-=a/this.aspectRatio:t+=a/this.aspectRatio):(e+=a,o<0?t-=a/this.aspectRatio:t+=a/this.aspectRatio)):(i>0&&(o<0?t-=i:t+=i),a>0&&(r<0?e-=a:e+=a)),(t<this.minXClamp||t>this.maxXClamp||e<this.minYClamp||e>this.maxYClamp)&&(t=n.position.x,e=n.position.y),f.PointPool.instance.borrow(t,e))}},{key:"dragCorner",value:function(t,e,n){var o=0,r=0,i=0,a=0,s=0,c=0,u=0,l=0,h=void 0,p=0;if(this.keepAspect){if(h=n.getHorizontalNeighbour().getVerticalNeighbour(),i=h.position.x,a=h.position.y,t<=h.position.x){if(e<=h.position.y){if(o=i-100/this.aspectRatio,r=a-100/this.aspectRatio*this.aspectRatio,p=this.getSide(f.PointPool.instance.borrow(o,r),h.position,f.PointPool.instance.borrow(t,e)),p>0){s=Math.abs(h.position.y-e),c=s/this.aspectRatio,u=h.position.y-s,l=h.position.x-c;var d=this.enforceMinSize(l,u,n);n.move(d.x,d.y),f.PointPool.instance.returnPoint(d)}else if(p<0){c=Math.abs(h.position.x-t),s=c*this.aspectRatio,u=h.position.y-s,l=h.position.x-c;var g=this.enforceMinSize(l,u,n);n.move(g.x,g.y),f.PointPool.instance.returnPoint(g)}}else if(o=i-100/this.aspectRatio,r=a+100/this.aspectRatio*this.aspectRatio,p=this.getSide(f.PointPool.instance.borrow(o,r),h.position,f.PointPool.instance.borrow(t,e)),p>0){c=Math.abs(h.position.x-t),s=c*this.aspectRatio,u=h.position.y+s,l=h.position.x-c;var y=this.enforceMinSize(l,u,n);n.move(y.x,y.y),f.PointPool.instance.returnPoint(y)}else if(p<0){s=Math.abs(h.position.y-e),c=s/this.aspectRatio,u=h.position.y+s,l=h.position.x-c;var m=this.enforceMinSize(l,u,n);n.move(m.x,m.y),f.PointPool.instance.returnPoint(m)}}else if(e<=h.position.y){if(o=i+100/this.aspectRatio,r=a-100/this.aspectRatio*this.aspectRatio,p=this.getSide(f.PointPool.instance.borrow(o,r),h.position,f.PointPool.instance.borrow(t,e)),p<0){s=Math.abs(h.position.y-e),c=s/this.aspectRatio,u=h.position.y-s,l=h.position.x+c;var v=this.enforceMinSize(l,u,n);n.move(v.x,v.y),f.PointPool.instance.returnPoint(v)}else if(p>0){c=Math.abs(h.position.x-t),s=c*this.aspectRatio,u=h.position.y-s,l=h.position.x+c;var b=this.enforceMinSize(l,u,n);n.move(b.x,b.y),f.PointPool.instance.returnPoint(b)}}else if(o=i+100/this.aspectRatio,r=a+100/this.aspectRatio*this.aspectRatio,p=this.getSide(f.PointPool.instance.borrow(o,r),h.position,f.PointPool.instance.borrow(t,e)),p<0){c=Math.abs(h.position.x-t),s=c*this.aspectRatio,u=h.position.y+s,l=h.position.x+c;var _=this.enforceMinSize(l,u,n);n.move(_.x,_.y),f.PointPool.instance.returnPoint(_)}else if(p>0){s=Math.abs(h.position.y-e),c=s/this.aspectRatio,u=h.position.y+s,l=h.position.x+c;var C=this.enforceMinSize(l,u,n);n.move(C.x,C.y),f.PointPool.instance.returnPoint(C)}}else{var S=this.enforceMinSize(t,e,n);n.move(S.x,S.y),f.PointPool.instance.returnPoint(S)}this.center.recalculatePosition(this.getBounds())}},{key:"getSide",value:function(t,n,o){var r=e.sign((n.x-t.x)*(o.y-t.y)-(n.y-t.y)*(o.x-t.x));return f.PointPool.instance.returnPoint(t),f.PointPool.instance.returnPoint(o),r}},{key:"handleRelease",value:function(t){if(null!=t){for(var e=0,n=0;n<this.currentDragTouches.length;n++)t.id===this.currentDragTouches[n].id&&(this.currentDragTouches[n].dragHandle.setDrag(!1),t.dragHandle=null,e=n);this.currentDragTouches.splice(e,1),this.draw(this.ctx)}}},{key:"handleMove",value:function(t){for(var e=!1,n=0;n<this.currentDragTouches.length;n++)if(t.id===this.currentDragTouches[n].id&&null!=this.currentDragTouches[n].dragHandle){var o=this.currentDragTouches[n],r=this.clampPosition(t.x-o.dragHandle.offset.x,t.y-o.dragHandle.offset.y);t.x=r.x,t.y=r.y,f.PointPool.instance.returnPoint(r),o.dragHandle instanceof c.CornerMarker?this.dragCorner(t.x,t.y,o.dragHandle):this.dragCenter(t.x,t.y,o.dragHandle),this.currentlyInteracting=!0,e=!0,p.ImageCropperDataShare.setPressed(this.canvas);break}if(!e){for(var i=0;i<this.markers.length;i++){var a=this.markers[i];if(a.touchInBounds(t.x,t.y)){t.dragHandle=a,this.currentDragTouches.push(t),a.setDrag(!0),t.dragHandle.offset.x=t.x-t.dragHandle.position.x,t.dragHandle.offset.y=t.y-t.dragHandle.position.y,this.dragCorner(t.x-t.dragHandle.offset.x,t.y-t.dragHandle.offset.y,t.dragHandle);break}}null!==t.dragHandle&&"undefined"!=typeof t.dragHandle||this.center.touchInBounds(t.x,t.y)&&(t.dragHandle=this.center,this.currentDragTouches.push(t),t.dragHandle.setDrag(!0),t.dragHandle.offset.x=t.x-t.dragHandle.position.x,t.dragHandle.offset.y=t.y-t.dragHandle.position.y,this.dragCenter(t.x-t.dragHandle.offset.x,t.y-t.dragHandle.offset.y,t.dragHandle))}}},{key:"updateClampBounds",value:function(){var t=this.srcImage.height/this.srcImage.width,e=this.canvas.height/this.canvas.width,n=this.canvas.width,o=this.canvas.height;e>t?(n=this.canvas.width,o=this.canvas.width*t):(o=this.canvas.height,n=this.canvas.height/t),this.minXClamp=this.canvas.width/2-n/2,this.minYClamp=this.canvas.height/2-o/2,this.maxXClamp=this.canvas.width/2+n/2,this.maxYClamp=this.canvas.height/2+o/2}},{key:"getCropBounds",value:function(){var t=this.getBounds();return t.top=Math.round((t.top+this.minYClamp)/this.ratioH),t.bottom=Math.round((t.bottom+this.minYClamp)/this.ratioH),t.left=Math.round((t.left-this.minXClamp)/this.ratioW),t.right=Math.round((t.right-this.minXClamp)/this.ratioW),t}},{key:"clampPosition",value:function(t,e){return t<this.minXClamp&&(t=this.minXClamp),t>this.maxXClamp&&(t=this.maxXClamp),e<this.minYClamp&&(e=this.minYClamp),e>this.maxYClamp&&(e=this.maxYClamp),f.PointPool.instance.borrow(t,e)}},{key:"isImageSet",value:function(){return this.imageSet}},{key:"setImage",value:function(t){if(!t)throw"Image is null";this.srcImage=t,this.imageSet=!0,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var n=this.buffer.getContext("2d");n.clearRect(0,0,this.buffer.width,this.buffer.height),this.fileType=this.getDataUriMimeType(t.src),this.cropperSettings.minWithRelativeToResolution&&(this.minWidth=this.canvas.width*this.minWidth/this.srcImage.width,this.minHeight=this.canvas.height*this.minHeight/this.srcImage.height),this.updateClampBounds();var o=this.srcImage.height/this.srcImage.width,r=this.getBounds(),i=r.height/r.width,a=this.canvas.width,s=this.canvas.height;this.canvasWidth=a,this.canvasHeight=s;var c=this.canvas.width/2,u=this.canvas.height/2,l=f.PointPool.instance.borrow(c-r.width/2,u+r.height/2),h=f.PointPool.instance.borrow(c+r.width/2,u+r.height/2),p=f.PointPool.instance.borrow(c-r.width/2,u-r.height/2),d=f.PointPool.instance.borrow(c+r.width/2,u-r.height/2);if(this.tl.setPosition(l.x,l.y),this.tr.setPosition(h.x,h.y),this.bl.setPosition(p.x,p.y),this.br.setPosition(d.x,d.y),f.PointPool.instance.returnPoint(l),f.PointPool.instance.returnPoint(h),f.PointPool.instance.returnPoint(p),f.PointPool.instance.returnPoint(d),this.center.setPosition(c,u),i>o){var g=Math.min(a*o,s),y=g/i;l=f.PointPool.instance.borrow(c-y/2,u+g/2),h=f.PointPool.instance.borrow(c+y/2,u+g/2),p=f.PointPool.instance.borrow(c-y/2,u-g/2),d=f.PointPool.instance.borrow(c+y/2,u-g/2)}else{var m=Math.min(s/o,a),v=m*i;l=f.PointPool.instance.borrow(c-m/2,u+v/2),h=f.PointPool.instance.borrow(c+m/2,u+v/2),p=f.PointPool.instance.borrow(c-m/2,u-v/2),d=f.PointPool.instance.borrow(c+m/2,u-v/2)}this.tl.setPosition(l.x,l.y),this.tr.setPosition(h.x,h.y),this.bl.setPosition(p.x,p.y),this.br.setPosition(d.x,d.y),f.PointPool.instance.returnPoint(l),f.PointPool.instance.returnPoint(h),f.PointPool.instance.returnPoint(p),f.PointPool.instance.returnPoint(d),this.vertSquashRatio=e.detectVerticalSquash(this.srcImage),this.draw(this.ctx),this.croppedImage=this.getCroppedImage(this.cropWidth,this.cropHeight)}},{key:"getCroppedImage",value:function(t,e){var n=this.getBounds();if(!this.srcImage)throw"Source image not set.";var o=this.srcImage.height/this.srcImage.width,r=this.canvas.height/this.canvas.width,i=this.canvas.width,a=this.canvas.height;r>o?(i=this.canvas.width,a=this.canvas.width*o):r<o?(a=this.canvas.height,i=this.canvas.height/o):(a=this.canvas.height,i=this.canvas.width),this.ratioW=i/this.srcImage.width,this.ratioH=a/this.srcImage.height;var s=(this.buffer.height-a)/2/this.ratioH,c=(this.buffer.width-i)/2/this.ratioW,u=this.cropCanvas.getContext("2d");if(this.cropperSettings.preserveSize){var l=Math.max(Math.round(n.right/this.ratioW-c),0)*this.srcImage.width/this.canvas.width,h=Math.max(Math.round(n.bottom/this.ratioH-s),0)*this.srcImage.height/this.canvas.height;this.cropCanvas.width=l,this.cropCanvas.height=h,this.cropperSettings.croppedWidth=this.cropCanvas.width,this.cropperSettings.croppedHeight=this.cropCanvas.height}return u.clearRect(0,0,this.cropCanvas.width,this.cropCanvas.height),this.drawImageIOSFix(u,this.srcImage,Math.max(Math.round(n.left/this.ratioW-c),0),Math.max(Math.round(n.top/this.ratioH-s),0),Math.max(Math.round(n.width/this.ratioW),1),Math.max(Math.round(n.height/this.ratioH),1),0,0,this.cropCanvas.width,this.cropCanvas.height),this.croppedImage.width=this.cropCanvas.width,this.croppedImage.height=this.cropCanvas.height,this.croppedImage.src=this.cropCanvas.toDataURL(this.fileType),this.croppedImage}},{key:"getBounds",value:function(){for(var t=Number.MAX_VALUE,e=Number.MAX_VALUE,n=-Number.MAX_VALUE,o=-Number.MAX_VALUE,r=0;r<this.markers.length;r++){var i=this.markers[r];i.position.x<t&&(t=i.position.x),i.position.x>n&&(n=i.position.x),i.position.y<e&&(e=i.position.y),i.position.y>o&&(o=i.position.y)}var a=new s.Bounds;return a.left=t,a.right=n,a.top=e,a.bottom=o,a}},{key:"setBounds",value:function(t){for(var e=void 0,n=void 0,o=void 0,r=void 0,i=this.getBounds(),a=0;a<this.markers.length;a++){var s=this.markers[a];s.position.x===i.left?s.position.y===i.top?e=s:o=s:s.position.y===i.top?n=s:r=s}e.setPosition(t.left,t.top),n.setPosition(t.right,t.top),o.setPosition(t.left,t.bottom),r.setPosition(t.right,t.bottom),this.center.recalculatePosition(t),this.center.draw(this.ctx)}},{key:"onTouchMove",value:function(t){if(this.crop.isImageSet()){if(t.preventDefault(),1===t.touches.length)for(var n=0;n<t.touches.length;n++){var o=t.touches[n],r=e.getTouchPos(this.canvas,o),i=new u.CropTouch(r.x,r.y,o.identifier);f.PointPool.instance.returnPoint(r),this.move(i)}else if(2===t.touches.length){var a=(t.touches[0].clientX-t.touches[1].clientX)*(t.touches[0].clientX-t.touches[1].clientX)+(t.touches[0].clientY-t.touches[1].clientY)*(t.touches[0].clientY-t.touches[1].clientY);if(this.previousDistance&&this.previousDistance!==a){var s=a<this.previousDistance?1:-1,c=this.getBounds();c.top+=s,c.left+=s,c.right-=s,c.bottom-=s,this.setBounds(c)}this.previousDistance=a}this.draw(this.ctx)}}},{key:"onMouseMove",value:function(t){if(this.crop.isImageSet()&&this.isMouseDown){var n=e.getMousePos(this.canvas,t);this.move(new u.CropTouch(n.x,n.y,0));var o=this.getDragTouchForID(0);o?(o.x=n.x,o.y=n.y):o=new u.CropTouch(n.x,n.y,0),f.PointPool.instance.returnPoint(n),this.drawCursors(o),this.draw(this.ctx)}}},{key:"move",value:function(t){this.isMouseDown&&this.handleMove(t)}},{key:"getDragTouchForID",value:function(t){for(var e=void 0,n=0;n<this.currentDragTouches.length;n++)t===this.currentDragTouches[n].id&&(e=this.currentDragTouches[n]);return e}},{key:"drawCursors",value:function(t){var e=!1;null!=t&&(t.dragHandle===this.center&&(p.ImageCropperDataShare.setStyle(this.canvas,"move"),e=!0),null!==t.dragHandle&&t.dragHandle instanceof c.CornerMarker&&(this.drawCornerCursor(t.dragHandle,t.dragHandle.position.x,t.dragHandle.position.y),e=!0));var n=!1;if(!e){for(var o=0;o<this.markers.length;o++)n=n||this.drawCornerCursor(this.markers[o],t.x,t.y);n||p.ImageCropperDataShare.setStyle(this.canvas,"initial")}n||e||!this.center.touchInBounds(t.x,t.y)?this.center.setOver(!1):(this.center.setOver(!0),p.ImageCropperDataShare.setOver(this.canvas),p.ImageCropperDataShare.setStyle(this.canvas,"move"))}},{key:"drawCornerCursor",value:function(t,e,n){return t.touchInBounds(e,n)?(t.setOver(!0),t.getHorizontalNeighbour().position.x>t.position.x?t.getVerticalNeighbour().position.y>t.position.y?(p.ImageCropperDataShare.setOver(this.canvas),p.ImageCropperDataShare.setStyle(this.canvas,"nwse-resize")):(p.ImageCropperDataShare.setOver(this.canvas),p.ImageCropperDataShare.setStyle(this.canvas,"nesw-resize")):t.getVerticalNeighbour().position.y>t.position.y?(p.ImageCropperDataShare.setOver(this.canvas),p.ImageCropperDataShare.setStyle(this.canvas,"nesw-resize")):(p.ImageCropperDataShare.setOver(this.canvas),p.ImageCropperDataShare.setStyle(this.canvas,"nwse-resize")),!0):(t.setOver(!1),!1)}},{key:"onTouchStart",value:function(t){this.crop.isImageSet()&&(this.isMouseDown=!0)}},{key:"onTouchEnd",value:function(t){if(this.crop.isImageSet()){for(var e=0;e<t.changedTouches.length;e++){var n=t.changedTouches[e],o=this.getDragTouchForID(n.identifier);o&&null!==o&&((o.dragHandle instanceof c.CornerMarker||o.dragHandle instanceof l.DragMarker)&&o.dragHandle.setOver(!1),this.handleRelease(o))}0===this.currentDragTouches.length&&(this.isMouseDown=!1,this.currentlyInteracting=!1)}}},{key:"drawImageIOSFix",value:function(t,e,n,o,r,i,a,s,c,u){t.drawImage(e,n,o,r,i,a,s,c,u)}},{key:"onMouseDown",value:function(t){this.crop.isImageSet()&&(this.isMouseDown=!0)}},{key:"onMouseUp",value:function(t){this.crop.isImageSet()&&(p.ImageCropperDataShare.setReleased(this.canvas),this.isMouseDown=!1,this.handleRelease(new u.CropTouch(0,0,0)))}}],[{key:"sign",value:function(t){return+t===t?0===t?t:t>0?1:-1:NaN}},{key:"getMousePos",value:function(t,e){var n=t.getBoundingClientRect();return f.PointPool.instance.borrow(e.clientX-n.left,e.clientY-n.top)}},{key:"getTouchPos",value:function(t,e){var n=t.getBoundingClientRect();return f.PointPool.instance.borrow(e.clientX-n.left,e.clientY-n.top)}},{key:"detectVerticalSquash",value:function(t){var e=t.height,n=document.createElement("canvas");n.width=1,n.height=e;var o=n.getContext("2d");o.drawImage(t,0,0);for(var r=o.getImageData(0,0,1,e).data,i=0,a=e,s=e;s>i;){var c=r[4*(s-1)+3];0===c?a=s:i=s,s=a+i>>1}var u=s/e;return 0===u?1:u}}]),e}(h.ImageCropperModel);e.ImageCropper=d},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(33),a=function(){function t(e,n,r,i){o(this,t),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),this.left=e,this.right=e+r,this.top=n,this.bottom=n+i}return r(t,[{key:"getCentre",value:function(){var t=this.width,e=this.height;return i.PointPool.instance.borrow(this.left+t/2,this.top+e/2)}},{key:"width",get:function(){return this.right-this.left}},{key:"height",get:function(){return this.bottom-this.top}}]),t}();e.Bounds=a},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,
"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(34),a=function(){function t(e){o(this,t),t._instance=this;for(var n=null,r=0;r<e;r++)if(0===r)this.firstAvailable=new i.Point,n=this.firstAvailable;else{var a=new i.Point;n.next=a,n=a}}return r(t,[{key:"borrow",value:function(t,e){if(null==this.firstAvailable)throw"Pool exhausted";this.borrowed++;var n=this.firstAvailable;return this.firstAvailable=n.next,n.x=t,n.y=e,n}},{key:"returnPoint",value:function(t){this.borrowed--,t.x=0,t.y=0,t.next=this.firstAvailable,this.firstAvailable=t}}],[{key:"instance",get:function(){return t._instance}}]),t}();e.PointPool=a},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=function(){function t(e,o){n(this,t),this.x=e,this.y=o}return o(t,[{key:"next",get:function(){return this._next},set:function(t){this._next=t}},{key:"prev",get:function(){return this._prev},set:function(t){this._prev=t}}]),t}();e.Point=r},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(36),c=function(t){function e(t,n,i,a){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,a))}return i(e,t),a(e,[{key:"drawCornerBorder",value:function(t){var e=10;(this.over||this.drag)&&(e=12);var n=1,o=1;if(this.horizontalNeighbour.position.x<this.position.x&&(n=-1),this.verticalNeighbour.position.y<this.position.y&&(o=-1),this.cropperSettings.rounded){var r=this.position.x-this.horizontalNeighbour.position.x,i=this.position.y-this.verticalNeighbour.position.y,a=Math.round(Math.sin(Math.PI/2)*Math.abs(r/2))/4,s=Math.round(Math.sin(Math.PI/2)*Math.abs(i/2))/4;this.offset.x=n>0?a:-a,this.offset.y=o>0?s:-s}else this.offset.x=0,this.offset.y=0;t.beginPath(),t.lineJoin="miter",t.moveTo(this.position.x+this.offset.x,this.position.y+this.offset.y),t.lineTo(this.position.x+this.offset.x+e*n,this.position.y+this.offset.y),t.lineTo(this.position.x+this.offset.x+e*n,this.position.y+this.offset.y+e*o),t.lineTo(this.position.x+this.offset.x,this.position.y+this.offset.y+e*o),t.lineTo(this.position.x+this.offset.x,this.position.y+this.offset.y),t.closePath(),t.lineWidth=this.cropperSettings.cropperDrawSettings.strokeWidth,t.strokeStyle=this.cropperSettings.cropperDrawSettings.strokeColor,t.stroke()}},{key:"drawCornerFill",value:function(t){var e=10;(this.over||this.drag)&&(e=12);var n=1,o=1;this.horizontalNeighbour.position.x<this.position.x&&(n=-1),this.verticalNeighbour.position.y<this.position.y&&(o=-1),t.beginPath(),t.moveTo(this.position.x+this.offset.x,this.position.y+this.offset.y),t.lineTo(this.position.x+this.offset.x+e*n,this.position.y+this.offset.y),t.lineTo(this.position.x+this.offset.x+e*n,this.position.y+this.offset.y+e*o),t.lineTo(this.position.x+this.offset.x,this.position.y+this.offset.y+e*o),t.lineTo(this.position.x+this.offset.x,this.position.y+this.offset.y),t.closePath(),t.fillStyle="rgba(255,255,255,.7)",t.fill()}},{key:"moveX",value:function(t){this.setPosition(t,this.position.y)}},{key:"moveY",value:function(t){this.setPosition(this.position.x,t)}},{key:"move",value:function(t,e){this.setPosition(t,e),this.verticalNeighbour.moveX(t),this.horizontalNeighbour.moveY(e)}},{key:"addHorizontalNeighbour",value:function(t){this.horizontalNeighbour=t}},{key:"addVerticalNeighbour",value:function(t){this.verticalNeighbour=t}},{key:"getHorizontalNeighbour",value:function(){return this.horizontalNeighbour}},{key:"getVerticalNeighbour",value:function(){return this.verticalNeighbour}},{key:"draw",value:function(t){this.drawCornerFill(t),this.drawCornerBorder(t)}}]),e}(s.Handle);e.CornerMarker=c},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(34),a=n(37),s=function(){function t(e,n,r,s){o(this,t),this.cropperSettings=new a.CropperSettings,this.over=!1,this.drag=!1,this._position=new i.Point(e,n),this.offset=new i.Point(0,0),this.radius=r,this.cropperSettings=s}return r(t,[{key:"setDrag",value:function(t){this.drag=t,this.setOver(t)}},{key:"draw",value:function(t){}},{key:"setOver",value:function(t){this.over=t}},{key:"touchInBounds",value:function(t,e){return t>this.position.x-this.radius+this.offset.x&&t<this.position.x+this.radius+this.offset.x&&e>this.position.y-this.radius+this.offset.y&&e<this.position.y+this.radius+this.offset.y}},{key:"setPosition",value:function(t,e){this._position.x=t,this._position.y=e}},{key:"position",get:function(){return this._position}}]),t}();e.Handle=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(38),a=function(){function t(){o(this,t),this.canvasWidth=300,this.canvasHeight=300,this.width=200,this.height=200,this.minWidth=50,this.minHeight=50,this.minWithRelativeToResolution=!0,this.responsive=!1,this.croppedWidth=100,this.croppedHeight=100,this.cropperDrawSettings=new i.CropperDrawSettings,this.touchRadius=20,this.noFileInput=!1,this.fileType="png",this.allowedFilesRegex=/\.(jpe?g|png|gif)$/i,this.preserveSize=!1,this._rounded=!1,this._keepAspect=!0}return r(t,[{key:"rounded",set:function(t){this._rounded=t,t&&(this._keepAspect=!0)},get:function(){return this._rounded}},{key:"keepAspect",set:function(t){if(t===!1&&this._rounded)throw new Error("Cannot set keep aspect to false on rounded cropper. Ellipsis not supported");this._keepAspect=t},get:function(){return this._keepAspect}}]),t}();e.CropperSettings=a},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function t(){n(this,t),this.strokeWidth=1,this.strokeColor="rgba(255,255,255,1)"};e.CropperDrawSettings=o},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function t(e,o,r){n(this,t),this.id=r||0,this.x=e||0,this.y=o||0,this.dragHandle=null};e.CropTouch=o},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(36),c=n(33),u=function(t){function e(t,n,i,a){o(this,e);var s=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i,a));return s.iconPoints=[],s.scaledIconPoints=[],s.getDragIconPoints(s.iconPoints,1),s.getDragIconPoints(s.scaledIconPoints,1.2),s}return i(e,t),a(e,[{key:"draw",value:function(t){this.over||this.drag?this.drawIcon(t,this.scaledIconPoints):this.drawIcon(t,this.iconPoints)}},{key:"getDragIconPoints",value:function(t,e){var n=17*e,o=14*e,r=8*e,i=4*e;t.push(c.PointPool.instance.borrow(-i/2,n-r)),t.push(c.PointPool.instance.borrow(-o/2,n-r)),t.push(c.PointPool.instance.borrow(0,n)),t.push(c.PointPool.instance.borrow(o/2,n-r)),t.push(c.PointPool.instance.borrow(i/2,n-r)),t.push(c.PointPool.instance.borrow(i/2,i/2)),t.push(c.PointPool.instance.borrow(n-r,i/2)),t.push(c.PointPool.instance.borrow(n-r,o/2)),t.push(c.PointPool.instance.borrow(n,0)),t.push(c.PointPool.instance.borrow(n-r,-o/2)),t.push(c.PointPool.instance.borrow(n-r,-i/2)),t.push(c.PointPool.instance.borrow(i/2,-i/2)),t.push(c.PointPool.instance.borrow(i/2,-n+r)),t.push(c.PointPool.instance.borrow(o/2,-n+r)),t.push(c.PointPool.instance.borrow(0,-n)),t.push(c.PointPool.instance.borrow(-o/2,-n+r)),t.push(c.PointPool.instance.borrow(-i/2,-n+r)),t.push(c.PointPool.instance.borrow(-i/2,-i/2)),t.push(c.PointPool.instance.borrow(-n+r,-i/2)),t.push(c.PointPool.instance.borrow(-n+r,-o/2)),t.push(c.PointPool.instance.borrow(-n,0)),t.push(c.PointPool.instance.borrow(-n+r,o/2)),t.push(c.PointPool.instance.borrow(-n+r,i/2)),t.push(c.PointPool.instance.borrow(-i/2,i/2))}},{key:"drawIcon",value:function(t,e){t.beginPath(),t.moveTo(e[0].x+this.position.x,e[0].y+this.position.y);for(var n=0;n<e.length;n++){var o=e[n];t.lineTo(o.x+this.position.x,o.y+this.position.y)}t.closePath(),t.fillStyle=this.cropperSettings.cropperDrawSettings.strokeColor,t.fill()}},{key:"recalculatePosition",value:function(t){var e=t.getCentre();this.setPosition(e.x,e.y),c.PointPool.instance.returnPoint(e)}}]),e}(s.Handle);e.DragMarker=u},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function t(){n(this,t)};e.ImageCropperModel=o},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=function(){function t(){n(this,t)}return o(t,null,[{key:"setPressed",value:function(t){this.pressed=t}},{key:"setReleased",value:function(t){t===this.pressed&&(this.pressed=void 0)}},{key:"setOver",value:function(t){this.over=t}},{key:"setStyle",value:function(t,e){void 0!==this.pressed?this.pressed===t:t===this.over}}]),t}();r.share={},e.ImageCropperDataShare=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=function(t){function e(){return n(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),e}(Number);e.Fraction=s;var c=function(){function t(){n(this,t)}return a(t,null,[{key:"log",value:function(){if(u.debug)for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n]}}]),t}();e.Debug=c;var u=function(){function t(){n(this,t)}return a(t,null,[{key:"addEvent",value:function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)}},{key:"imageHasData",value:function(t){return!!t.exifdata}},{key:"base64ToArrayBuffer",value:function(t,e){e=e||t.match(/^data:([^;]+);base64,/im)[1]||"",t=t.replace(/^data:([^;]+);base64,/gim,"");for(var n=atob(t),o=n.length,r=new ArrayBuffer(o),i=new Uint8Array(r),a=0;a<o;a++)i[a]=n.charCodeAt(a);return r}},{key:"objectURLToBlob",value:function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(){200!==n.status&&0!==n.status||e(n.response)},n.send()}},{key:"getImageData",value:function(e,n){function o(o){var r=t.findEXIFinJPEG(o),i=t.findIPTCinJPEG(o);e.exifdata=r||{},e.iptcdata=i||{},n&&n.call(e)}if("src"in e&&e.src)if(/^data:/i.test(e.src)){var r=t.base64ToArrayBuffer(e.src);o(r)}else/^blob:/i.test(e.src)?!function(){var n=new FileReader;n.onload=function(t){o(t.target.result)},t.objectURLToBlob(e.src,function(t){n.readAsArrayBuffer(t)})}():!function(){var t=new XMLHttpRequest;t.onload=function(){if(200!==t.status&&0!==t.status)throw"Could not load image";o(t.response),t=null},t.open("GET",e.src,!0),t.responseType="arraybuffer",t.send(null)}();else if(FileReader&&(e instanceof Blob||e instanceof File)){var i=new FileReader;i.onload=function(t){c.log("Got file of length "+t.target.result.byteLength),o(t.target.result)},i.readAsArrayBuffer(e)}}},{key:"findEXIFinJPEG",value:function(e){var n=new DataView(e);if(c.log("Got file of length "+e.byteLength),255!==n.getUint8(0)||216!==n.getUint8(1))return c.log("Not a valid JPEG"),!1;for(var o=2,r=e.byteLength,i=void 0;o<r;){if(255!==n.getUint8(o))return c.log("Not a valid marker at offset "+o+", found: "+n.getUint8(o)),!1;if(i=n.getUint8(o+1),c.log(i),225===i)return c.log("Found 0xFFE1 marker"),t.readEXIFData(n,o+4);o+=2+n.getUint16(o+2)}}},{key:"findIPTCinJPEG",value:function(e){var n=new DataView(e);if(c.log("Got file of length "+e.byteLength),255!==n.getUint8(0)||216!==n.getUint8(1))return c.log("Not a valid JPEG"),!1;for(var o=2,r=e.byteLength,i=function(t,e){return 56===t.getUint8(e)&&66===t.getUint8(e+1)&&73===t.getUint8(e+2)&&77===t.getUint8(e+3)&&4===t.getUint8(e+4)&&4===t.getUint8(e+5)};o<r;){if(i(n,o)){var a=n.getUint8(o+7);a%2!==0&&(a+=1),0===a&&(a=4);var s=o+8+a,u=n.getUint16(o+6+a);return t.readIPTCData(e,s,u)}o++}}},{key:"readIPTCData",value:function(e,n,o){for(var r=new DataView(e),i={},a=void 0,s=void 0,c=void 0,u=void 0,l=void 0,h=n;h<n+o;)28===r.getUint8(h)&&2===r.getUint8(h+1)&&(u=r.getUint8(h+2),u in t.IptcFieldMap&&(c=r.getInt16(h+3),l=c+5,s=t.IptcFieldMap[u],a=t.getStringFromDB(r,h+5,c),i.hasOwnProperty(s)?i[s]instanceof Array?i[s].push(a):i[s]=[i[s],a]:i[s]=a)),h++;return i}},{key:"readTags",value:function(e,n,o,r,i){for(var a=e.getUint16(o,!i),s={},u=void 0,l=void 0,h=0;h<a;h++)u=o+12*h+2,l=r[e.getUint16(u,!i)],l||c.log("Unknown tag: "+e.getUint16(u,!i)),s[l]=t.readTagValue(e,u,n,o,i);return s}},{key:"readTagValue",value:function(e,n,o,r,i){var a=e.getUint16(n+2,!i),c=e.getUint32(n+4,!i),u=e.getUint32(n+8,!i)+o,l=void 0,h=void 0,p=void 0,f=void 0,d=void 0,g=void 0;switch(a){case 1:case 7:if(1===c)return e.getUint8(n+8,!i);for(l=c>4?u:n+8,h=[],f=0;f<c;f++)h[f]=e.getUint8(l+f);return h;case 2:return l=c>4?u:n+8,t.getStringFromDB(e,l,c-1);case 3:if(1===c)return e.getUint16(n+8,!i);for(l=c>2?u:n+8,h=[],f=0;f<c;f++)h[f]=e.getUint16(l+2*f,!i);return h;case 4:if(1===c)return e.getUint32(n+8,!i);for(h=[],f=0;f<c;f++)h[f]=e.getUint32(u+4*f,!i);return h;case 5:if(1===c)return d=e.getUint32(u,!i),g=e.getUint32(u+4,!i),p=new s(d/g),p.numerator=d,p.denominator=g,p;for(h=[],f=0;f<c;f++)d=e.getUint32(u+8*f,!i),g=e.getUint32(u+4+8*f,!i),h[f]=new s(d/g),h[f].numerator=d,h[f].denominator=g;return h;case 9:if(1===c)return e.getInt32(n+8,!i);for(h=[],f=0;f<c;f++)h[f]=e.getInt32(u+4*f,!i);return h;case 10:if(1===c)return e.getInt32(u,!i)/e.getInt32(u+4,!i);for(h=[],f=0;f<c;f++)h[f]=e.getInt32(u+8*f,!i)/e.getInt32(u+4+8*f,!i);return h}}},{key:"getStringFromDB",value:function(t,e,n){for(var o="",r=e;r<e+n;r++)o+=String.fromCharCode(t.getUint8(r));return o}},{key:"readEXIFData",value:function(e,n){if("Exif"!==t.getStringFromDB(e,n,4))return c.log("Not valid EXIF data! "+t.getStringFromDB(e,n,4)),!1;var o=void 0,r=void 0,i=void 0,a=void 0,s=void 0,u=n+6;if(18761===e.getUint16(u))o=!1;else{if(19789!==e.getUint16(u))return c.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;o=!0}if(42!==e.getUint16(u+2,!o))return c.log("Not valid TIFF data! (no 0x002A)"),!1;var l=e.getUint32(u+4,!o);if(l<8)return c.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(u+4,!o)),!1;if(r=t.readTags(e,u,u+l,t.TiffTags,o),r.ExifIFDPointer){a=t.readTags(e,u,u+r.ExifIFDPointer,t.Tags,o);for(i in a)if({}.hasOwnProperty.call(a,i)){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":a[i]=t.StringValues[i][a[i]];break;case"ExifVersion":case"FlashpixVersion":a[i]=String.fromCharCode(a[i][0],a[i][1],a[i][2],a[i][3]);break;case"ComponentsConfiguration":var h="Components";a[i]=t.StringValues[h][a[i][0]]+t.StringValues[h][a[i][1]]+t.StringValues[h][a[i][2]]+t.StringValues[h][a[i][3]]}r[i]=a[i]}}if(r.GPSInfoIFDPointer){s=t.readTags(e,u,u+r.GPSInfoIFDPointer,t.GPSTags,o);for(i in s)if({}.hasOwnProperty.call(s,i)){switch(i){case"GPSVersionID":s[i]=s[i][0]+"."+s[i][1]+"."+s[i][2]+"."+s[i][3]}r[i]=s[i]}}return r}},{key:"getData",value:function(e,n){return!((e instanceof Image||e instanceof HTMLImageElement)&&!e.complete)&&(t.imageHasData(e)?n&&n.call(e):t.getImageData(e,n),!0)}},{key:"getTag",value:function(e,n){if(t.imageHasData(e))return e.exifdata[n]}},{key:"getAllTags",value:function(e){if(!t.imageHasData(e))return{};var n=void 0,o=e.exifdata,r={};for(n in o)o.hasOwnProperty(n)&&(r[n]=o[n]);return r}},{key:"pretty",value:function(e){if(!t.imageHasData(e))return"";var n=void 0,o=e.exifdata,r="";for(n in o)o.hasOwnProperty(n)&&(r+="object"===i(o[n])?o[n]instanceof Number?n+" : "+o[n]+" ["+o[n].numerator+"/"+o[n].denominator+"]\r\n":n+" : ["+o[n].length+" values]\r\n":n+" : "+o[n]+"\r\n");return r}},{key:"readFromBinaryFile",value:function(e){return t.findEXIFinJPEG(e)}}]),t}();u.debug=!1,u.IptcFieldMap={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"},u.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},u.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},u.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},u.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},e.Exif=u},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(t,e,n,o){var i,a=arguments.length,s=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(a<3?i(s):a>3?i(e,n,s):i(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s},a=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=n(3),c=function t(){o(this,t)};c=i([s.Component({selector:"my-app",template:n(45)}),a("design:paramtypes",[])],c),e.AppComponent=c},function(t,e){t.exports='<header-area></header-area>\n<div class="wrapper">\n  <effect-area></effect-area>\n  <stage-area></stage-area>\n</div>'},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t,e,n,o){var r,a=arguments.length,s=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(a<3?r(s):a>3?r(e,n,s):r(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s},s=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=n(3),u=n(47),l=n(50),h=n(28),p={IMAGER:'[data-qimager-elem="image"]',LOADING_WRAP:'[data-qimager-elem="loadingWrap"]',IMAGE_INPUT:'[data-qimager-elem="imageInput"]',IMAGE_EFFECT:'[data-qimager-elem="effectImg"]'},f={SAVE:"图像生成成功！请右键另存为...",PLEASE_OPEN:"请先打开一张图片！"},d=800,g=500,y=[-1,0,0,1,0,0],m=function(){function t(e){o(this,t),this.sharedSerivce=e,this.cropperShow="none",this.imageData={},this.cropData={},this.sharedData=e.getSharedData(),this.cropperSettings=new h.CropperSettings,this.cropperSettings.noFileInput=!0,this.cropperSettings.canvasWidth=d,this.cropperSettings.canvasHeight=g,this.cropperSettings.keepAspect=!1}return r(t,[{key:"ngAfterViewInit",value:function(){var t=document.querySelector(p.IMAGER);this.sharedData&&(this.sharedData.imager=new u.Imager({img:t}),this.sharedData.imager.init())}},{key:"imageChange",value:function(t){var e=this;t&&t.target&&this.sharedData.imager&&t.target.files[0]&&(this.sharedData.isProcessing=!0,setTimeout(function(){e.sharedData.imager.loadImageFile(t.target.files[0]).then(function(t){if(t.status===u.STATUS.SUCESS)return e.sharedData.imager.reset()}).then(function(t){t.status===u.STATUS.SUCESS&&(e.sharedData.imageEffectUrl=e.sharedData.imageOriginUrl=t.data.dataUrl,e.sharedData.hasLoaded=!0),e.sharedData.isProcessing=!1})},100))}},{key:"openFile",value:function(){var t=document.querySelector(p.IMAGE_INPUT);t&&t.click()}},{key:"saveFile",value:function(){this.sharedData.imager&&(this.sharedData.imageEffectUrl?alert(f.SAVE):alert(f.PLEASE_OPEN))}},{key:"undo",value:function(){var t=this;this.sharedData.imager&&this.sharedData.hasLoaded&&(this.sharedData.isProcessing=!0,setTimeout(function(){t.sharedData.imager.undo({effectCategory:t.sharedData.effectCategory}).then(function(e){e.status===u.STATUS.SUCESS&&(t.sharedData.imageEffectUrl=e.data.dataUrl),t.sharedData.isProcessing=!1})},100))}},{key:"redo",value:function(){var t=this;this.sharedData.imager&&this.sharedData.hasLoaded&&(this.sharedData.isProcessing=!0,setTimeout(function(){t.sharedData.imager.redo({effectCategory:t.sharedData.effectCategory}).then(function(e){e.status===u.STATUS.SUCESS&&(t.sharedData.imageEffectUrl=e.data.dataUrl),t.sharedData.isProcessing=!1})},100))}},{key:"renew",value:function(){var t=this;this.sharedData.imager&&this.sharedData.hasLoaded&&(this.sharedData.isProcessing=!0,setTimeout(function(){t.sharedData.imager.renew().then(function(e){e.status===u.STATUS.SUCESS&&(t.sharedData.imageEffectUrl=e.data.dataUrl),t.sharedData.isProcessing=!1})},100))}},{key:"doCrop",value:function(){if(this.sharedData.imager&&this.sharedData.hasLoaded){var t=new Image;t.src=this.sharedData.imageEffectUrl,this.cropper.setImage(t),this.cropperShow="block"}}},{key:"endCrop",value:function(){var t=this;this.sharedData.imager&&this.sharedData.hasLoaded&&this.sharedData.imager.clip(this.cropData.left,this.cropData.top,this.cropData.width,this.cropData.height).then(function(e){e.status===u.STATUS.SUCESS&&(t.sharedData.imageEffectUrl=e.data.dataUrl)}),this.cropperShow="none"}},{key:"cancelCrop",value:function(){this.cropperShow="none"}},{key:"onCrop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t){var e=t.width,n=t.height,o=t.getCentre(),r=o.x,i=o.y,a=i-n/2,s=r-e/2;this.cropData={left:s,top:a,width:e,height:n}}}},{key:"mirror",value:function(){var t=this;arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.sharedData.hasLoaded&&this.sharedData.imager&&(this.sharedData.isProcessing=!0,this.sharedData.imager.transform(y).then(function(e){e.status===u.STATUS.SUCESS&&(t.sharedData.imageEffectUrl=e.data.dataUrl),t.sharedData.isProcessing=!1}))}}]),t}();a([c.ViewChild(h.ImageCropperComponent),s("design:type",h.ImageCropperComponent)],m.prototype,"cropper",void 0),m=a([c.Component({selector:"header-area",template:n(51)}),s("design:paramtypes",[l.SharedService])],m),e.HeaderAreaComponent=m},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();n(48);var i=n(49);e.STATUS={SUCESS:0,FAIL:-1,ERROR:-2,UNKNOWN:-9},e.EFFECT_CATEGORIES={PS:0,ACT:1},e.EFFECTS_ACT={brightness:"亮度",setHSI:"色相/饱和度调节",curve:"曲线",toGray:"灰度处理",toThresh:"灰度阈值",toReverse:"反色",gaussBlur:"高斯模糊",sharp:"锐化",mosaic:"马赛克",embossment:"浮雕效果",corrode:"腐蚀",noise:"添加杂色",darkCorner:"暗角",dotted:"喷点",origin:"原图"},e.EFFECTS_PS={origin:"原图",softenFace:"美肤",sketch:"素描",softEnhancement:"自然增强",purpleStyle:"紫调",soften:"柔焦",vintage:"复古",gray:"黑白",lomo:"仿lomo",strongEnhancement:"亮白增强",strongGray:"灰白",lightGray:"灰色",warmAutumn:"暖秋",carveStyle:"木雕",rough:"粗糙"},e.EFFECT_ORIGIN="origin";var a=20,s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t),this._doms={
img:HTMLImageElement},this._originLayer=null,this._layer=null,this._stack=null,this._curPSEffect="",this._curActEffect="",this._doms.img=e.img,this._stack=new i.Stack({size:a})}return r(t,[{key:"init",value:function(){this._initLayer()}},{key:"_initLayer",value:function(){var t=this;return new Promise(function(n,o){var r=t._doms.img||null;r?r.loadOnce(function(){try{t._originLayer=$AI(r),t._layer=$AI(r),n({status:e.STATUS.SUCESS,data:{dataUrl:r.src}})}catch(t){n({status:e.STATUS.ERROR,data:t})}}):n({status:e.STATUS.FAIL,msg:"Lack of image document object model!"})})}},{key:"reset",value:function(){var t=this;return this._initLayer().then(function(n){return n.status===e.STATUS.SUCESS&&(t._stack.reset(),t._stack.push(n.data.dataUrl)),n})}},{key:"act",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(o,r){var i=n.effect||"",a=n.params||[],s=t._doms.img;if(i=t.getValidActEffect(i),t._layer=$AI(s),t.getValidActEffect(i)&&t._layer)if(i===e.EFFECT_ORIGIN)t._originLayer.clone().replace(s).complete(function(){t._stack.push(s.src),o({status:e.STATUS.SUCESS,data:{dataUrl:s.src}})});else{a.unshift(i);try{var c=t._layer,u=t._layer;c.add(u.act.apply(u,a)).replace(s).complete(function(){t._stack.push(s.src),o({status:e.STATUS.SUCESS,data:{dataUrl:s.src}})})}catch(t){o({status:e.STATUS.ERROR,msg:"ERROR!",data:t})}}else o({status:e.STATUS.FAIL,msg:"Lack of params!"})})}},{key:"getValidPSEffect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!t)return"";for(var n in e.EFFECTS_PS)if(n===t||e.EFFECTS_PS[n]===t)return n}},{key:"ps",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(o,r){var i=n.effect||"";i=t.getValidPSEffect(i);var a=t._doms.img;if(t._layer=$AI(a),t._layer&&a&&i)try{t._curPSEffect&&t._curPSEffect===i?o({status:e.STATUS.SUCESS,data:{dataUrl:a.src}}):i===e.EFFECT_ORIGIN?t._originLayer.clone().replace(a).complete(function(){t._stack.push(a.src),o({status:e.STATUS.SUCESS,data:{dataUrl:a.src}})}):t._layer.ps(i).replace(a).complete(function(){t._stack.push(a.src),o({status:e.STATUS.SUCESS,data:{dataUrl:a.src}})}),t._curPSEffect=i}catch(t){o({status:e.STATUS.ERROR,data:t})}else o({status:e.STATUS.FAIL,msg:"Lack of params!"})})}},{key:"undo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this._layer){t.effectCategory,this._doms.img;return Promise.resolve({status:e.STATUS.SUCESS,data:{dataUrl:this._stack.load(i.FLAGS_STACK.BOTTOM)}})}return Promise.resolve({status:e.STATUS.FAIL})}},{key:"redo",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._layer?Promise.resolve({status:e.STATUS.SUCESS,data:{dataUrl:this._stack.load(i.FLAGS_STACK.TOP)}}):Promise.resolve({status:e.STATUS.FAIL})}},{key:"renew",value:function(){if(this._layer){var t={effect:e.EFFECT_ORIGIN};return this.ps(t)}return Promise.resolve({status:e.STATUS.FAIL})}},{key:"getValidActEffect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t)for(var n in e.EFFECTS_ACT)if(t===n||t===e.EFFECTS_ACT[n])return n;return""}},{key:"clip",value:function(t,n,o,r){var i=this;return new Promise(function(a,s){i._layer?!function(){var s=i._doms.img;try{i._layer=$AI(s),i._layer.clip(t,n,o,r).replace(s).complete(function(){i._stack.push(s.src),a({status:e.STATUS.SUCESS,data:{dataUrl:s.src}})})}catch(t){a({status:e.STATUS.ERROR,data:t})}}():a({status:e.STATUS.FAIL,msg:"Lack of layer!"})})}},{key:"rotate",value:function(t){this._layer}},{key:"scale",value:function(t,e){this._layer}},{key:"transform",value:function(t){var n=this;return new Promise(function(o,r){var i=n._doms.img;if(n._layer=$AI(i),n._layer)try{n._layer.transform(t).replace(i).complete(function(){n._stack.push(i.src),o({status:e.STATUS.SUCESS,data:{dataUrl:i.src}})})}catch(t){o({status:e.STATUS.ERROR,data:t})}else o({status:e.STATUS.FAIL,msg:"Lack of layer!"})})}},{key:"loadImageFile",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=new FileReader,o=this;return new Promise(function(r,i){n.readAsDataURL(t),n.onload=function(){var t=o._doms.img;t.src=this.result,r({status:e.STATUS.SUCESS})}})}},{key:"getImageDimension",value:function(t){return new Promise(function(n,o){var r=0,i=0;t&&t.src?!function(){var o=new Image;o.onload=function(){r=o.naturalWidth,i=o.naturalHeight,n({status:e.STATUS.SUCESS,data:{width:r,height:i}})},o.src=t.src}():n({status:e.STATUS.FAIL,msg:"Lack of Image Element!"})})}}]),t}();e.Imager=s},,function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();e.FLAGS_STACK={NODIRECTION:0,TOP:1,BOTTOM:-1};var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t),this._stack=[],this._ptr=-1,this._size=Number.MAX_VALUE,e.size&&(this._size=e.size)}return o(t,[{key:"_moveTop",value:function(){var t=this._stack.length;this._ptr=this._ptr<t-1?this._ptr+1:t-1}},{key:"_moveBottom",value:function(){var t=this._stack.length;t?this._ptr=this._ptr<1?0:this._ptr-1:this._ptr=-1}},{key:"push",value:function(t){t&&(this._ptr<this._size-1?(this._stack.push(t),this._ptr=this._stack.length-1):(this._stack.splice(0,1),this._stack.push(t)))}},{key:"pop",value:function(){if(this._stack&&this._stack.length)return this._ptr--,this._stack.pop()}},{key:"load",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t===e.FLAGS_STACK.TOP?this._moveTop():t===e.FLAGS_STACK.BOTTOM&&this._moveBottom(),this._stack[this._ptr]}},{key:"reset",value:function(){this._stack=[],this._ptr=-1}},{key:"destroy",value:function(){this._stack=null,this._ptr=-1}}]),t}();e.Stack=r},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t,e,n,o){var r,a=arguments.length,s=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(a<3?r(s):a>3?r(e,n,s):r(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s},s=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=n(3),u=function t(){o(this,t),this.imager=null,this.imageEffectUrl="",this.imageOriginUrl="",this.curStage=0,this.hasLoaded=!1,this.effectCategory=0,this.loadingShowFlag=!1,this.isProcessing=!1};e.SharedData=u;var l=function(){function t(){o(this,t),this._sharedData=new u}return r(t,[{key:"getSharedData",value:function(){return this._sharedData}}]),t}();l=a([c.Injectable(),s("design:paramtypes",[])],l),e.SharedService=l},function(t,e){t.exports='<div class="header">\n    <input type="file" style="display:none;" data-qimager-elem="imageInput" (change)="imageChange($event)">\n<img data-qimager-elem="image" src="xxxHTMLLINKxxx0.071759036472822450.08449003269220245xxx" alt="" draggable="false" style="display:none;">\n<div class="logo">QImager</div>\n<div class="function-btns">\n    <a (click)="openFile()" class="fun-btn open" href="javascript:;"><i class="iconfont icon-open"></i>打开图片</a>\n    <a (click)="doCrop()" class="fun-btn cut" href="javascript:;"><i class="iconfont icon-cut"></i>剪裁</a>\n    <a (click)="mirror()" class="fun-btn saveEffect" href="javascript:;"><i class="iconfont icon-jingxiang"></i>镜像</a>\n    <a (click)="undo()" class="fun-btn cancel" href="javascript:;"><i class="iconfont icon-cancel2"></i>撤销</a>\n    <a (click)="redo()" class="fun-btn redo" href="javascript:;"><i class="iconfont icon-redo"></i>恢复</a>\n    <a (click)="renew()" class="fun-btn yuantu" href="javascript:;"><i class="iconfont icon-yuantu"></i>重做</a>\n    <a (click)="sharedData.hasLoaded&&(sharedData.curStage=(sharedData.curStage===0)?1:0)" class="fun-btn compare" href="javascript:;"><i class="iconfont icon-compare"></i>{{sharedData.curStage===0?\'对比\':\'原图\'}}</a>\n    <a (click)="saveFile()" class="fun-btn save" href="javascript:;"><i class="iconfont icon-save"></i>保存</a>\n</div>\n</div>\n<div class="cropper-modal" [ngStyle]="{display: cropperShow}">\n    <img-cropper [image]="imageData" [settings]="cropperSettings" (onCrop)="onCrop($event)" ></img-cropper>\n    <button (click)="endCrop()" >确认</button>\n    <button (click)="cancelCrop()" >取消</button>\n</div>'},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t,e,n,o){var r,a=arguments.length,s=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(a<3?r(s):a>3?r(e,n,s):r(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s},s=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=n(3),u=n(47),l=n(50),h=function(){function t(e){o(this,t),this.sharedSerivce=e,this.PS_PICTURE_NAMES=[{effect:"原图",pic:"yuantu"},{effect:"美肤",pic:"meifu"},{effect:"素描",pic:"sumiao"},{effect:"自然增强",pic:"ziran"},{effect:"紫调",pic:"zidiao"},{effect:"柔焦",pic:"roujiao"},{effect:"复古",pic:"fugu"},{effect:"黑白",pic:"heibai"},{effect:"仿lomo",pic:"lomo"},{effect:"亮白增强",pic:"liangbai"},{effect:"灰白",pic:"huibai"},{effect:"灰色",pic:"huise"},{effect:"暖秋",pic:"nuanqiu"},{effect:"木雕",pic:"mudiao"},{effect:"粗糙",pic:"cucao"}],this.ACT_EFFECTS=[{actName:"基础调整",actIcon:"icon-jichu",actEffect:"brightness",options:[{optionName:"亮度",value:0,min:-50,max:50,step:1},{optionName:"对比度",value:0,min:-50,max:50,step:1}]},{actName:"色相/饱和度调节",actIcon:"icon-sexiang",actEffect:"setHSI",options:[{optionName:"色相",value:0,min:-50,max:50,step:1},{optionName:"饱和度",value:0,min:-50,max:50,step:1},{optionName:"明度",value:0,min:-50,max:50,step:1},{optionName:"着色",value:0,min:-50,max:50,step:1,type:"checkbox"}]},{actName:"灰度阈值",actIcon:"icon-huidu",actEffect:"toThresh",options:[{optionName:"阈值",value:127,min:0,max:255,step:1}]},{actName:"高斯模糊",actIcon:"icon-gaosi",actEffect:"gaussBlur",options:[{optionName:"大小",value:0,min:0,max:20,step:1}]},{actName:"锐化",actIcon:"icon-ruihua",actEffect:"sharp",options:[{optionName:"大小",value:0,min:0,max:20,step:1}]},{actName:"马赛克",actIcon:"icon-masaike",actEffect:"mosaic",options:[{optionName:"大小",value:0,min:0,max:20,step:1}]},{actName:"添加杂色",actIcon:"icon-zase",actEffect:"noise",options:[{optionName:"数量",value:0,min:0,max:20,step:1}]},{actName:"暗角",actIcon:"icon-anjiao",actEffect:"darkCorner",options:[{optionName:"大小",value:0,min:0,max:10,step:1},{optionName:"增加暗度",value:0,min:0,max:255,step:1}]}],this.sharedData=e.getSharedData()}return r(t,[{key:"onActChange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=null;if(t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=t.options[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var c=a.value;n.push(parseInt(String(c.value),10))}}catch(t){r=!0,i=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}e={effect:t.actEffect,params:n}}this.act(e)}},{key:"onActSelected",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t){var e=!0,n=!1,o=void 0;try{for(var r,i=this.ACT_EFFECTS[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;t.actEffect!==a.actEffect&&(a.selected=!1)}}catch(t){n=!0,o=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw o}}}}},{key:"ps",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.sharedData.imager&&e&&this.sharedData.hasLoaded&&(this.sharedData.isProcessing=!0,setTimeout(function(){t.sharedData.imager.ps({effect:e}).then(function(e){e.status===u.STATUS.SUCESS&&(t.sharedData.imageEffectUrl=e.data.dataUrl),t.sharedData.isProcessing=!1})},100))}},{key:"act",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.sharedData.imager&&e&&this.sharedData.hasLoaded&&(this.sharedData.isProcessing=!0,setTimeout(function(){t.sharedData.imager.act(e).then(function(e){e.status===u.STATUS.SUCESS&&(t.sharedData.imageEffectUrl=e.data.dataUrl),t.sharedData.isProcessing=!1})},100))}}]),t}();h=a([c.Component({selector:"effect-area",template:n(53)}),s("design:paramtypes",[l.SharedService])],h),e.EffectAreaComponent=h},function(t,e){t.exports='<div class="left-wrapper">\n    <div class="left">\n        <div class="tab">\n            <ul>\n                <li class="{{ sharedData.effectCategory===0? \'selected\':\'\'}}" (click)="sharedData.effectCategory=0">效果</li>\n                <li class="{{ sharedData.effectCategory===1? \'selected\':\'\'}}" (click)="sharedData.effectCategory=1">高级效果</li>\n            </ul>\n        </div>\n        <div class="effects-box {{ sharedData.effectCategory===0? \'\' :\'dn\'}}">\n            <ul id="effects" class="effects">\n                <li *ngFor="let obj of PS_PICTURE_NAMES" class="e_item" (click)="ps(obj.effect)">\n                    <div class="imgWrapper">\n                        <img src="{{\'http://halzhan.cn/qimager/public/slicing/images/\'+obj.pic+\'.png\'}}" alt="">{{obj.effect}}\n                    </div>\n                </li>\n            </ul>\n        </div>\n        <!--高级效果 start-->\n        <div class="advanced-effects {{ sharedData.effectCategory===1? \'\' :\'dn\'}}">\n            <ul class="advanced-effects-con">\n                <act-item *ngFor="let item of ACT_EFFECTS" [actItem]="item" (changeEvent)="onActChange($event)" (selectEvent)="onActSelected($event)" ></act-item>\n            </ul>\n        </div>\n        <!--高级效果 end-->\n    </div>\n</div>'},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t,e,n,o){var r,a=arguments.length,s=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(a<3?r(s):a>3?r(e,n,s):r(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s},s=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=n(3),u=n(55),l=function(){function t(){o(this,t),this.changeEvent=new c.EventEmitter,this.selectEvent=new c.EventEmitter}return r(t,[{key:"changeValue",value:function(){this.changeEvent.emit(this.actItem)}},{key:"toggleSelected",value:function(){this.actItem.selected=!this.actItem.selected,this.selectEvent.emit(this.actItem)}}]),t}();a([c.Input(),s("design:type",u.ActItem)],l.prototype,"actItem",void 0),a([c.Output(),s("design:type",c.EventEmitter)],l.prototype,"changeEvent",void 0),a([c.Output(),s("design:type",c.EventEmitter)],l.prototype,"selectEvent",void 0),l=a([c.Component({selector:"act-item",template:n(56)}),s("design:paramtypes",[])],l),e.ActItemComponent=l},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function t(){n(this,t),this.optionName="",this.value=0,this.min=-50,this.step=1,this.max=50,this.type="range"};e.ActItemOption=o;var r=function t(){n(this,t),this.actName="",this.actEffect="",this.actIcon="",this.selected=!1,this.options=[],this.negativeTitle="取消",this.positiveTitle="确定",this.negativeCb=function(){},this.positiveCb=function(){}};e.ActItem=r},function(t,e){t.exports='<li class="e_item">\n    <div class="adv-title {{ actItem.selected? \'selected\':\'\'}}" (click)="toggleSelected()"><i class="iconfont {{actItem.actIcon}}"></i>{{actItem.actName}}<i class="iconfont icon-arrow"></i></div>\n    <div class="function-items" *ngIf="actItem.selected" >\n        <div class="function-item" *ngFor="let option of actItem.options">\n            <div class="item-tit">{{option.optionName}}\n                <span class="item-input" *ngIf="!option.type||option.type===\'range\'">{{option.value}}</span>\n            </div>\n            <div class="bar-box">\n                <input (change)="changeValue()" type="{{option.type || \'range\'}}" [(ngModel)]="option.value" value="{{option.value}}" step="{{option.step}}" min="{{option.min}}" max="{{option.max}}" />\n            </div>\n        </div>\n        <!--<div class="bar-btns">\n            <a href="javascript:;" class="bar-btn" (click)="changeValue()" >{{actItem.positiveTitle||\'确定\'}}</a>\n            <a href="javascript:;" class="bar-btn" >{{actItem.negativeTitle||\'取消\'}}</a>\n        </div>-->\n    </div>\n</li>'},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t,e,n,o){var r,a=arguments.length,s=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(s=(a<3?r(s):a>3?r(e,n,s):r(e,n))||s);return a>3&&s&&Object.defineProperty(e,n,s),s},s=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=n(3),u=n(50),l=n(58),h={IMG_ORIGIN:'[data-qimager-elem="originImg"]',IMG_EFFECT:'[data-qimager-elem="effectImg"]'},p=function(){function t(e){o(this,t),this.sharedService=e,this.isOrigin=!1,this.defaultUrl="http://halzhan.cn/qimager/public/slicing/images/stop.jpg",this.sharedData=e.getSharedData()}return r(t,[{key:"toggleOrigin",value:function(){var t=document.querySelector(h.IMG_ORIGIN),e=document.querySelector(h.IMG_EFFECT);if(t&&e){var n="normal",o="zIndex",r=t.width,i=t.height,a=(l(t).css(o),e.width),s=e.height;l(e).css(o);l(t).animate({width:a+"px",height:s+"px"},n,function(){}),l(e).animate({width:r+"px",height:i+"px"},n,function(){}),this.isOrigin=!this.isOrigin}}}]),t}();p=a([c.Component({selector:"stage-area",template:n(59)}),s("design:paramtypes",[u.SharedService])],p),e.StageAreaComponent=p},,function(t,e){t.exports='<div class="right">\n    <div class="picWrapper" *ngIf="sharedData.curStage===0">\n        <a (click)="toggleOrigin()" class="small-yuantu" href="javascript:;">\n            <span class="yuantu-text">{{isOrigin?\'效果\':\'原图\'}}</span>\n            <img data-qimager-elem="originImg" src="{{sharedData.hasLoaded?sharedData.imageOriginUrl:defaultUrl}}" alt="" draggable="false" style="z-index: 2">\n        </a>\n        <img data-qimager-elem="effectImg" src="{{sharedData.hasLoaded?sharedData.imageEffectUrl:defaultUrl}}" alt="" draggable="false" style="z-index: 1">\n    </div>\n    <div class="picCompare" *ngIf="sharedData.curStage===1">\n        <div class="yuantu">\n            <p>原图：</p>\n            <img class="yuantu" src="{{sharedData.imageOriginUrl}}" alt="" draggable="false" >\n        </div>\n        <div class="effect">\n            <p>效果图：</p>\n            <img class="effect" src="{{sharedData.imageEffectUrl}}" alt="" draggable="false" >\n        </div>\n    </div>\n    <div *ngIf="sharedData.isProcessing" data-qimager-elem="loadingWrap" class="infoMsg">处理中</div>\n</div>'}]);